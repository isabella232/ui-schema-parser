!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.avsc=e():t.avsc=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){(function(e){"use strict";function n(t,e){var r=u.load(t);return r.protocol?h.createProtocol(r,e):f.createType(r,e)}function i(t,r){function n(){if(c.isValid())return!0;var t=2*c.buf.length,r=new e(t);return t=d.readSync(s,r,0,t),c.buf=e.concat([c.buf,r]),c.pos=0,!1}r=r||{};for(var i=void 0===r.decode||!!r.decode,o=Math.max(r.size||4096,4),s=d.openSync(t,"r"),u=new e(o),h=0,c=new l.Tap(u),f=null;h<4;)h+=d.readSync(s,u,h,o-h);if(a.MAGIC_BYTES.equals(u.slice(0,4))){do f=a.HEADER_TYPE._read(c);while(!n());if(i!==!1){var p=f.meta;p["avro.schema"]=JSON.parse(p["avro.schema"].toString()),void 0!==p["avro.codec"]&&(p["avro.codec"]=p["avro.codec"].toString())}}return d.closeSync(s),f}function o(t,e){return d.createReadStream(t).pipe(new a.streams.BlockDecoder(e))}function s(t,e,r){var n=new a.streams.BlockEncoder(e,r);return n.pipe(d.createWriteStream(t,{defaultEncoding:"binary"})),n}var a=r(5),u=r(7),h=r(46),c=r(47),f=r(9),l=r(10),p=r(49),d=r(8);t.exports={Protocol:h.Protocol,Type:f.Type,assemble:c.assemble,combine:p.combine,createFileDecoder:o,createFileEncoder:s,extractFileHeader:i,infer:p.infer,parse:n,streams:a.streams,types:f.builtins}}).call(e,r(1).Buffer)},function(t,e,r){(function(t,n){"use strict";function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function o(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,r){if(o()<r)throw new RangeError("Invalid typed array length");return t.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(r),e.__proto__=t.prototype):(null===e&&(e=new t(r)),e.length=r),e}function t(e,r,n){if(!(t.TYPED_ARRAY_SUPPORT||this instanceof t))return new t(e,r,n);if("number"==typeof e){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,r,n)}function a(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,r,n):"string"==typeof e?f(t,e,r):d(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e,r,n){return u(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}function c(e,r){if(u(r),e=s(e,r<0?0:0|_(r)),!t.TYPED_ARRAY_SUPPORT)for(var n=0;n<r;++n)e[n]=0;return e}function f(e,r,n){if("string"==typeof n&&""!==n||(n="utf8"),!t.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|y(r,n);e=s(e,i);var o=e.write(r,n);return o!==i&&(e=e.slice(0,o)),e}function l(t,e){var r=e.length<0?0:0|_(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(e,r,n,i){if(r.byteLength,n<0||r.byteLength<n)throw new RangeError("'offset' is out of bounds");if(r.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return r=void 0===n&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,n):new Uint8Array(r,n,i),t.TYPED_ARRAY_SUPPORT?(e=r,e.__proto__=t.prototype):e=l(e,r),e}function d(e,r){if(t.isBuffer(r)){var n=0|_(r.length);return e=s(e,n),0===e.length?e:(r.copy(e,0,0,n),e)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||K(r.length)?s(e,0):l(e,r);if("Buffer"===r.type&&Q(r.data))return l(e,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function _(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function g(e){return+e!=e&&(e=0),t.alloc(+e)}function y(e,r){if(t.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(e).length;default:if(i)return q(e).length;r=(""+r).toLowerCase(),i=!0}}function v(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,r);case"utf8":case"utf-8":return R(this,e,r);case"ascii":return N(this,e,r);case"latin1":case"binary":return B(this,e,r);case"base64":return L(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function w(e,r,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof r&&(r=t.from(r,i)),t.isBuffer(r))return 0===r.length?-1:b(e,r,n,i,o);if("number"==typeof r)return r&=255,t.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):b(e,[r],n,i,o);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}var h;if(i){var c=-1;for(h=r;h<a;h++)if(o(t,h)===o(e,c===-1?0:h-c)){if(c===-1&&(c=h),h-c+1===u)return c*s}else c!==-1&&(h-=h-c),c=-1}else for(r+u>a&&(r=a-u),h=r;h>=0;h--){for(var f=!0,l=0;l<u;l++)if(o(t,h+l)!==o(e,l)){f=!1;break}if(f)return h}return-1}function k(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function E(t,e,r,n){return G(q(e,t.length-r),t,r,n)}function x(t,e,r,n){return G(V(e),t,r,n)}function T(t,e,r,n){return x(t,e,r,n)}function S(t,e,r,n){return G(J(e),t,r,n)}function A(t,e,r,n){return G(Y(e,t.length-r),t,r,n)}function L(t,e,r){return 0===e&&r===t.length?X.fromByteArray(t):X.fromByteArray(t.slice(e,r))}function R(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,h,c,f;switch(a){case 1:o<128&&(s=o);break;case 2:u=t[i+1],128===(192&u)&&(f=(31&o)<<6|63&u,f>127&&(s=f));break;case 3:u=t[i+1],h=t[i+2],128===(192&u)&&128===(192&h)&&(f=(15&o)<<12|(63&u)<<6|63&h,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:u=t[i+1],h=t[i+2],c=t[i+3],128===(192&u)&&128===(192&h)&&128===(192&c)&&(f=(15&o)<<18|(63&u)<<12|(63&h)<<6|63&c,f>65535&&f<1114112&&(s=f))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return O(n)}function O(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=tt));return r}function N(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function B(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function I(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=W(t[o]);return i}function z(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function F(e,r,n,i,o,s){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<s)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function j(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function D(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function P(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,i){return i||P(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(t,e,r,n,23,4),r+4}function C(t,e,r,n,i){return i||P(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(t,e,r,n,52,8),r+8}function Z(t){if(t=H(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function H(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function W(t){return t<16?"0"+t.toString(16):t.toString(16)}function q(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function Y(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function J(t){return X.toByteArray(Z(t))}function G(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function K(t){return t!==t}var X=r(2),$=r(3),Q=r(4);e.Buffer=t,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50,t.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:i(),e.kMaxLength=o(),t.poolSize=8192,t._augment=function(e){return e.__proto__=t.prototype,e},t.from=function(t,e,r){return a(null,t,e,r)},t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0})),t.alloc=function(t,e,r){return h(null,t,e,r)},t.allocUnsafe=function(t){return c(null,t)},t.allocUnsafeSlow=function(t){return c(null,t)},t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,r){if(!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,i=r.length,o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,r){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=t.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){var s=e[n];if(!t.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},t.byteLength=y,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},t.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},t.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?R(this,0,t):v.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e,r,n,i,o){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var s=o-i,a=n-r,u=Math.min(s,a),h=this.slice(i,o),c=e.slice(r,n),f=0;f<u;++f)if(h[f]!==c[f]){s=h[f],a=c[f];break}return s<a?-1:a<s?1:0},t.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},t.prototype.indexOf=function(t,e,r){return w(this,t,e,r,!0)},t.prototype.lastIndexOf=function(t,e,r){return w(this,t,e,r,!1)},t.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return k(this,t,e,r);case"utf8":case"utf-8":return E(this,t,e,r);case"ascii":return x(this,t,e,r);case"latin1":case"binary":return T(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;t.prototype.slice=function(e,r){var n=this.length;e=~~e,r=void 0===r?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i;if(t.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=t.prototype;else{var o=r-e;i=new t(o,void 0);for(var s=0;s<o;++s)i[s]=this[s+e]}return i},t.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},t.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},t.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},t.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},t.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),$.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),$.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),$.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),$.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;F(this,t,e,r,i,0)}var o=1,s=0;for(this[e]=255&t;++s<r&&(o*=256);)this[e+s]=t/o&255;return e+r},t.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;F(this,t,e,r,i,0)}var o=r-1,s=1;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=t/s&255;return e+r},t.prototype.writeUInt8=function(e,r,n){return e=+e,r|=0,n||F(this,e,r,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=255&e,r+1},t.prototype.writeUInt16LE=function(e,r,n){return e=+e,r|=0,n||F(this,e,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):j(this,e,r,!0),r+2},t.prototype.writeUInt16BE=function(e,r,n){return e=+e,r|=0,n||F(this,e,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):j(this,e,r,!1),r+2},t.prototype.writeUInt32LE=function(e,r,n){return e=+e,r|=0,n||F(this,e,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e):D(this,e,r,!0),r+4},t.prototype.writeUInt32BE=function(e,r,n){return e=+e,r|=0,n||F(this,e,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):D(this,e,r,!1),r+4},t.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);F(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},t.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);F(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},t.prototype.writeInt8=function(e,r,n){return e=+e,r|=0,n||F(this,e,r,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=255&e,r+1},t.prototype.writeInt16LE=function(e,r,n){return e=+e,r|=0,n||F(this,e,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):j(this,e,r,!0),r+2},t.prototype.writeInt16BE=function(e,r,n){return e=+e,r|=0,n||F(this,e,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):j(this,e,r,!1),r+2},t.prototype.writeInt32LE=function(e,r,n){return e=+e,r|=0,n||F(this,e,r,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):D(this,e,r,!0),r+4},t.prototype.writeInt32BE=function(e,r,n){return e=+e,r|=0,n||F(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):D(this,e,r,!1),r+4},t.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},t.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},t.prototype.writeDoubleLE=function(t,e,r){return C(this,t,e,!0,r)},t.prototype.writeDoubleBE=function(t,e,r){return C(this,t,e,!1,r)},t.prototype.copy=function(e,r,n,i){if(n||(n=0),i||0===i||(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o,s=i-n;if(this===e&&n<r&&r<i)for(o=s-1;o>=0;--o)e[o+r]=this[o+n];else if(s<1e3||!t.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+r]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),r);return s},t.prototype.fill=function(e,r,n,i){if("string"==typeof e){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=r;s<n;++s)this[s]=e;else{var a=t.isBuffer(e)?e:q(new t(e,i).toString()),u=a.length;for(s=0;s<n-r;++s)this[s+r]=a[s%u]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,r(1).Buffer,function(){return this}())},function(t,e){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function n(t){return 3*t.length/4-r(t)}function i(t){var e,n,i,o,s,a,u=t.length;s=r(t),a=new c(3*u/4-s),i=s>0?u-4:u;var f=0;for(e=0,n=0;e<i;e+=4,n+=3)o=h[t.charCodeAt(e)]<<18|h[t.charCodeAt(e+1)]<<12|h[t.charCodeAt(e+2)]<<6|h[t.charCodeAt(e+3)],a[f++]=o>>16&255,a[f++]=o>>8&255,a[f++]=255&o;return 2===s?(o=h[t.charCodeAt(e)]<<2|h[t.charCodeAt(e+1)]>>4,a[f++]=255&o):1===s&&(o=h[t.charCodeAt(e)]<<10|h[t.charCodeAt(e+1)]<<4|h[t.charCodeAt(e+2)]>>2,a[f++]=o>>8&255,a[f++]=255&o),a}function o(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}function s(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],i.push(o(n));return i.join("")}function a(t){for(var e,r=t.length,n=r%3,i="",o=[],a=16383,h=0,c=r-n;h<c;h+=a)o.push(s(t,h,h+a>c?c:h+a));return 1===n?(e=t[r-1],i+=u[e>>2],i+=u[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=u[e>>10],i+=u[e>>4&63],i+=u[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=n,e.toByteArray=i,e.fromByteArray=a;for(var u=[],h=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,p=f.length;l<p;++l)u[l]=f[l],h[f.charCodeAt(l)]=l;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,h=u>>1,c=-7,f=r?i-1:0,l=r?-1:1,p=t[e+f];for(f+=l,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+t[e+f],f+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+f],f+=l,c-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,n),o-=h}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,h=8*o-i-1,c=(1<<h)-1,f=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+f>=1?l/u:l*Math.pow(2,1-f),e*u>=2&&(s++,u/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[r+p]=255&s,p+=d,s/=256,h-=8);t[r+p-d]|=128*_}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){(function(e,n){"use strict";function i(t,r){r=r||{};var n=!!r.noDecode;_.Duplex.call(this,{readableObjectMode:!n,allowHalfOpen:!1}),this._type=p.createType(l.load(t)),this._tap=new E(new e(0)),this._writeCb=null,this._needPush=!1,this._readValue=c(n,this._type),this._finished=!1,this.on("finish",function(){this._finished=!0,this._read()})}function o(t){t=t||{};var r=!!t.noDecode;_.Duplex.call(this,{allowHalfOpen:!0,readableObjectMode:!r}),this._type=null,this._codecs=t.codecs,this._parseHook=t.parseHook,this._tap=new E(new e(0)),this._blockTap=new E(new e(0)),this._syncMarker=null,this._readValue=null,this._noDecode=r,this._queue=new d.OrderedQueue,this._decompress=null,this._index=0,this._needPush=!1,this._finished=!1,this.on("finish",function(){this._finished=!0,this._needPush&&this._read()})}function s(t,r){r=r||{},_.Transform.call(this,{writableObjectMode:!0,allowHalfOpen:!1}),this._type=p.createType(l.load(t)),this._writeValue=function(t,e){try{this._type._write(t,e)}catch(t){this.emit("error",t)}},this._tap=new E(new e(r.batchSize||65536))}function a(t,r){r=r||{},_.Duplex.call(this,{allowHalfOpen:!0,writableObjectMode:!0});var n,i;p.Type.isType(t)?(i=t,t=void 0):(n=l.load(t),i=p.createType(n),t=JSON.stringify(n)),this._schema=t,this._type=i,this._writeValue=function(t,e){try{this._type._write(t,e)}catch(t){this.emit("error",t)}},this._blockSize=r.blockSize||65536,this._tap=new E(new e(this._blockSize)),this._codecs=r.codecs,this._codec=r.codec||"null",this._compress=null,this._omitHeader=r.omitHeader||!1,this._blockCount=0,this._syncMarker=r.syncMarker||(new d.Lcg).nextBuffer(16),this._queue=new d.OrderedQueue,this._pending=0,this._finished=!1,this._needPush=!1,this.on("finish",function(){this._finished=!0,this._blockCount&&this._flushChunk()})}function u(t,e,r,n){this.index=t,this.buf=e,this.cb=r,this.count=0|n}function h(t){var e=t.pos,r=m._read(t);return t.isValid()?r:(t.pos=e,null)}function c(t,e){return t?function(t){return function(e){var r=e.pos;return t(e),e.buf.slice(r,e.pos)}}(e._skip):function(t){return e._read(t)}}function f(t,r,n){var i=new e(n);return t.copy(i,0,r,r+n),i}var l=r(7),p=r(9),d=r(10),_=r(15),g=r(12),y=r(32),v=p.createType({namespace:"org.apache.avro.file",name:"Header",type:"record",fields:[{name:"magic",type:{type:"fixed",name:"Magic",size:4}},{name:"meta",type:{type:"map",values:"bytes"}},{name:"sync",type:{type:"fixed",name:"Sync",size:16}}]}),m=p.createType({namespace:"org.apache.avro.file",name:"Block",type:"record",fields:[{name:"count",type:"long"},{name:"data",type:"bytes"},{name:"sync",type:{type:"fixed",name:"Sync",size:16}}]}),w=p.createType("long"),b=new e("Obj"),k=g.format,E=d.Tap;g.inherits(i,_.Duplex),i.prototype._write=function(t,r,n){this._writeCb=n;var i=this._tap;i.buf=e.concat([i.buf.slice(i.pos),t]),i.pos=0,this._needPush&&(this._needPush=!1,this._read())},i.prototype._read=function(){this._needPush=!1;var t=this._tap,e=t.pos,r=this._readValue(t);t.isValid()?this.push(r):this._finished?this.push(null):(t.pos=e,this._needPush=!0,this._writeCb&&this._writeCb())},g.inherits(o,_.Duplex),o.getDefaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:y.inflateRaw}},o.prototype._decodeHeader=function(){var t=this._tap;if(t.buf.length<b.length)return!1;if(!b.equals(t.buf.slice(0,b.length)))return this.emit("error",new Error("invalid magic bytes")),!1;var e=v._read(t);if(!t.isValid())return!1;var r=(e.meta["avro.codec"]||"null").toString();if(this._decompress=(this._codecs||o.getDefaultCodecs())[r],!this._decompress)return void this.emit("error",new Error(k("unknown codec: %s",r)));try{var n=JSON.parse(e.meta["avro.schema"].toString());this._parseHook&&(n=this._parseHook(n)),this._type=p.createType(n)}catch(t){return void this.emit("error",t)}return this._readValue=c(this._noDecode,this._type),this._syncMarker=e.sync,this.emit("metadata",this._type,r,e),!0},o.prototype._write=function(t,r,i){var o=this._tap;return o.buf=e.concat([o.buf,t]),o.pos=0,this._decodeHeader()?(this._write=this._writeChunk,void this._write(new e(0),r,i)):void n.nextTick(i)},o.prototype._writeChunk=function(t,r,n){function i(){--a||n()}var o=this._tap;o.buf=e.concat([o.buf.slice(o.pos),t]),o.pos=0;for(var s,a=1;s=h(o);){if(!this._syncMarker.equals(s.sync))return void this.emit("error",new Error("invalid sync marker"));a++,this._decompress(s.data,this._createBlockCallback(i))}i()},o.prototype._createBlockCallback=function(t){var e=this,r=this._index++;return function(n,i){n?(e.emit("error",n),t()):(e._queue.push(new u(r,i,t)),e._needPush&&e._read())}},o.prototype._read=function(){this._needPush=!1;var t=this._blockTap;if(t.pos>=t.buf.length){var e=this._queue.pop();if(!e)return void(this._finished?this.push(null):this._needPush=!0);e.cb(),t.buf=e.buf,t.pos=0}this.push(this._readValue(t))},g.inherits(s,_.Transform),s.prototype._transform=function(t,r,n){var i=this._tap,o=i.buf,s=i.pos;if(this._writeValue(i,t),!i.isValid()){s&&this.push(f(i.buf,0,s));var a=i.pos-s;a>o.length&&(i.buf=new e(2*a)),i.pos=0,this._writeValue(i,t)}n()},s.prototype._flush=function(t){var e=this._tap,r=e.pos;r&&this.push(e.buf.slice(0,r)),t()},g.inherits(a,_.Duplex),a.getDefaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:y.deflateRaw}},a.prototype._write=function(t,r,n){var i=this._codec;if(this._compress=(this._codecs||a.getDefaultCodecs())[i],!this._compress)return void this.emit("error",new Error(k("unsupported codec: %s",i)));if(!this._omitHeader){var o={"avro.schema":new e(this._schema||this._type.getSchema()),"avro.codec":new e(this._codec)},s=v.getRecordConstructor(),u=new s(b,o,this._syncMarker);this.push(u.toBuffer())}this._write=this._writeChunk,this._write(t,r,n)},a.prototype._writeChunk=function(t,r,n){var i=this._tap,o=i.pos,s=!1;if(this._writeValue(i,t),!i.isValid()){o&&(this._flushChunk(o,n),s=!0);var a=i.pos-o;a>this._blockSize&&(this._blockSize=2*a),i.buf=new e(this._blockSize),i.pos=0,this._writeValue(i,t)}this._blockCount++,s||n()},a.prototype._flushChunk=function(t,e){var r=this._tap;t=t||r.pos,this._compress(r.buf.slice(0,t),this._createBlockCallback(e)),this._blockCount=0},a.prototype._read=function(){var t=this,e=this._queue.pop();return e?(this.push(w.toBuffer(e.count,!0)),this.push(w.toBuffer(e.buf.length,!0)),this.push(e.buf),this.push(this._syncMarker),void(this._finished||e.cb())):void(this._finished&&!this._pending?n.nextTick(function(){t.push(null)}):this._needPush=!0)},a.prototype._createBlockCallback=function(t){var e=this,r=this._index++,n=this._blockCount;return this._pending++,function(i,o){return i?void e.emit("error",i):(e._pending--,e._queue.push(new u(r,o,t,n)),void(e._needPush&&(e._needPush=!1,e._read())))}},t.exports={HEADER_TYPE:v,MAGIC_BYTES:b,streams:{BlockDecoder:o,BlockEncoder:a,RawDecoder:i,RawEncoder:s}}}).call(e,r(1).Buffer,r(6))},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){_&&p&&(_=!1,p.length?d=p.concat(d):g=-1,d.length&&a())}function a(){if(!_){var t=i(s);_=!0;for(var e=d.length;e;){for(p=d,d=[];++g<e;)p&&p[g].run();g=-1,e=d.length}p=null,_=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function h(){}var c,f,l=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(t){f=n}}();var p,d=[],_=!1,g=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new u(t,e)),1!==d.length||_||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,
l.env={},l.argv=[],l.version="",l.versions={},l.on=h,l.addListener=h,l.once=h,l.off=h,l.removeListener=h,l.removeAllListeners=h,l.emit=h,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,r){(function(e){"use strict";function n(t){var e;if("string"==typeof t&&"null"!==t)try{e=JSON.parse(t)}catch(r){~t.indexOf("/")&&(e=JSON.parse(o.readFileSync(t)))}return void 0===e&&(e=t),e}function i(){var t={};return function(r,n,i){return t[r]?void e.nextTick(i):(t[r]=!0,void o.readFile(r,{encoding:"utf8"},i))}}var o=r(8);t.exports={createImportHook:i,load:n}}).call(e,r(6))},function(t,e){},function(t,e,r){(function(e){"use strict";function n(t,e){if(null===t)throw new Error('invalid type: null (did you mean "null"?)');if(i.isType(t))return t;e=e||{},e.registry=e.registry||{};var r;if(e.typeHook&&(r=e.typeHook(t,e))){if(!i.isType(r))throw new Error(W("invalid typehook return value: %j",r));return r}if("string"==typeof t){if(t=L(t,e.namespace),r=e.registry[t])return r;if(O(t))return e.registry[t]=n({type:t},e);throw new Error(W("undefined type name: %s",t))}if(t.logicalType&&e.logicalTypes&&!G){var o=e.logicalTypes[t.logicalType];if(o){var s=e.namespace,a={};Object.keys(e.registry).forEach(function(t){a[t]=e.registry[t]});try{return new o(t,e)}catch(t){if(e.assertLogicalTypes)throw t;G=null,e.namespace=s,e.registry=a}}}if(Array.isArray(t)){var u=e.wrapUnions?g:_;r=new u(t,e)}else r=function(r){var n=q[r];if(void 0===n)throw new Error(W("unknown type: %j",r));return new n(t,e)}(t.type);return r}function i(t,e){var r=G||this;if(G=null,this._hs=void 0,this._name=void 0,this._aliases=void 0,t){var n=t.name,i=void 0===t.namespace?e&&e.namespace:t.namespace;if(void 0!==n){if(n=L(n,i),O(n))throw new Error(W("cannot rename primitive type: %j",n));var o=e&&e.registry;if(o){if(void 0!==o[n])throw new Error(W("duplicate type name: %s",n));o[n]=r}}else if(e&&e.noAnonymousTypes)throw new Error(W("missing name property in schema: %j",t));this._name=n,this._aliases=t.aliases?t.aliases.map(function(t){return L(t,i)}):[]}}function o(){i.call(this)}function s(){o.call(this)}function a(){o.call(this)}function u(){o.call(this)}function h(){o.call(this)}function c(){o.call(this)}function f(){o.call(this)}function l(){o.call(this)}function p(){o.call(this)}function d(t,e){if(i.call(this),!Array.isArray(t))throw new Error(W("non-array union schema: %j",t));if(!t.length)throw new Error("empty union");this._types=t.map(function(t){return n(t,e)}),this._branchIndices={},this._types.forEach(function(t,e){if(i.isType(t,"union"))throw new Error("unions cannot be directly nested");var r=t.getName(!0);if(void 0!==this._branchIndices[r])throw new Error(W("duplicate union branch name: %j",r));this._branchIndices[r]=e},this)}function _(t,e){d.call(this,t,e),this._logicalBranches=null,this._bucketIndices={},this._types.forEach(function(t,e){if(i.isType(t,"logical"))this._logicalBranches||(this._logicalBranches=[]),this._logicalBranches.push({index:e,type:t});else{var r=D(t);if(void 0!==this._bucketIndices[r])throw new Error(W("ambiguous unwrapped union: %j",this));this._bucketIndices[r]=e}},this)}function g(t,e){d.call(this,t,e),this._constructors=this._types.map(function(t){var e=t.getName(!0);if("null"===e)return null;var r="return function Branch$(val) { ";r+=~e.indexOf(".")?"this['"+e+"'] = val;":"this."+e+" = val;",r+=" };";var n=new Function(r)();return n.getBranchType=function(){return t},n})}function y(t,e){if(i.call(this,t,e),!Array.isArray(t.symbols)||!t.symbols.length)throw new Error(W("invalid enum symbols: %j",t.symbols));this._symbols=t.symbols,this._indices={},this._symbols.forEach(function(t,e){if(!F(t))throw new Error(W("invalid %s symbol: %j",this,t));if(void 0!==this._indices[t])throw new Error(W("duplicate %s symbol: %j",this,t));this._indices[t]=e},this)}function v(t,e){if(i.call(this,t,e),t.size!==(0|t.size)||t.size<1)throw new Error(W("invalid %s fixed size",this.getName(!0)));this._size=0|t.size}function m(t,e){if(i.call(this),!t.values)throw new Error(W("missing map values: %j",t));this._values=n(t.values,e);var r=t.keys;r||(r="string"),this._keys=n(r,e)}function w(t,e){if(i.call(this),!t.items)throw new Error(W("missing array items: %j",t));this._items=n(t.items,e)}function b(t,e){e=e||{};var r=e.namespace;if(void 0!==t.namespace)e.namespace=t.namespace;else if(t.name){var n=/^(.*)\.[^.]+$/.exec(t.name);n&&(e.namespace=n[1])}if(i.call(this,t,e),!Array.isArray(t.fields))throw new Error(W("non-array record fields: %j",t.fields));if(U.hasDuplicates(t.fields,function(t){return t.name}))throw new Error(W("duplicate field name: %j",t.fields));this._fieldsMap={},this._fields=t.fields.map(function(t){var r=new x(t,e);return this._fieldsMap[r.getName()]=r,r},this),this._isError="error"===t.type,this._constructor=this._createConstructor(),this._read=this._createReader(),this._skip=this._createSkipper(),this._write=this._createWriter(),this._check=this._createChecker(),e.namespace=r}function k(t,e){this._logicalTypeName=t.logicalType,i.call(this),G=this,this._underlyingType=n(t,e)}function E(t){h.call(this),this._noUnpack=!!t}function x(t,e){var r=t.name;if("string"!=typeof r||!F(r))throw new Error(W("invalid field name: %s",r));this._name=r,this._type=n(t.type,e),this._aliases=t.aliases||[],this._order=function(t){switch(t){case"ascending":return 1;case"descending":return-1;case"ignore":return 0;default:throw new Error(W("invalid order: %j",t))}}(void 0===t.order?"ascending":t.order);var i=t.default;if(void 0!==i){var o=this._type,s=o._copy(i,{coerce:2,wrap:2});O(o.getTypeName())&&"bytes"!==o.getTypeName()?this.getDefault=function(){return s}:this.getDefault=function(){return o._copy(s)}}}function T(t){this._readerType=t,this._items=null,this._read=null,this._size=0,this._symbols=null,this._values=null}function S(t,e,r,n){if(r){if(r._readerType!==t)throw new Error("invalid resolver");return r._read(e,n)}return t._read(e)}function A(t){var e=t.split(".");return e[e.length-1]}function L(t,e){~t.indexOf(".")?t=t.replace(/^\./,""):e&&(t=e+"."+t),t.split(".").forEach(function(e){if(!F(e))throw new Error(W("invalid name: %j",t))});var r=A(t);return O(r)?r:t}function R(t){var e=[];t._name&&e.push(t._name);var r,n,i=t._aliases;for(r=0,n=i.length;r<n;r++)e.push(i[r]);return e}function O(t){var e=q[t];return e&&e.prototype instanceof o}function N(t){if("error"===t)t="record";else{var e=/^([^:]+):(.*)$/.exec(t);e&&(t="union"===e[1]?e[2]+"Union":e[1])}return U.capitalize(t)+"Type"}function B(t){var e=t.readLong();return e<0&&(e=-e,t.skipLong()),e}function I(t,e){K=e&&e.exportAttrs;var r=e&&e.noDeref;return function(e){return JSON.stringify(t,function(t,n){if(n){if("object"==typeof n&&n.hasOwnProperty("default")&&!n.hasOwnProperty("logicalType"))return K?{name:n.name,type:n.type,default:n.default,order:"ascending"!==n.order?n.order:void 0,aliases:n.aliases.length?n.aliases:void 0}:{name:n.name,type:n.type};if(n.aliases){var i=n.name;if(i){if(r||e[i])return i;e[i]=!0}K&&n.aliases.length||(n.aliases=void 0)}}return n})}({})}function z(t){return t>=-9007199254740990&&t<=9007199254740990}function M(t){return t&&"Buffer"===t.type&&Array.isArray(t.data)}function F(t){return V.test(t)}function j(t,e){throw new Error(W("invalid %s: %j",e,t))}function D(t){var e=t.getTypeName();switch(e){case"double":case"float":case"int":case"long":return"number";case"bytes":case"fixed":return"buffer";case"enum":return"string";case"map":case"error":case"record":return"object";default:return e}}function P(t){if(null===t)return"null";var r=typeof t;if("object"===r){if(Array.isArray(t))return"array";if(e.isBuffer(t))return"buffer"}return r}var U=r(10),C=r(1),Z=r(12),H=U.Tap,W=Z.format,q={array:w,boolean:a,bytes:p,double:f,enum:y,error:b,fixed:v,float:c,int:u,long:h,map:m,null:s,record:b,string:l},V=/^[A-Za-z_][A-Za-z0-9_]*$/,Y=new U.Lcg,J=new H(new C.SlowBuffer(1024)),G=null,K=!1;i.isType=function(){var t=arguments.length;if(!t)return!1;var e=arguments[0];if(!e||"function"!=typeof e._update||"function"!=typeof e.getTypeName)return!1;if(1===t)return!0;var r,n=e.getTypeName();for(r=1;r<t;r++)if(0===n.indexOf(arguments[r]))return!0;return!1},i.__reset=function(t){J.buf=new C.SlowBuffer(t)},i.prototype.createResolver=function(t,e){if(!i.isType(t))throw new Error(W("not a type: %j",t));if(!i.isType(this,"logical")&&i.isType(t,"logical"))return this.createResolver(t._underlyingType,e);e=e||{},e.registry=e.registry||{};var r,n;if(i.isType(this,"record","error")&&i.isType(t,"record","error")&&(n=this._name+":"+t._name,r=e.registry[n]))return r;if(r=new T(this),n&&(e.registry[n]=r),i.isType(t,"union")){var o=t._types.map(function(t){return this.createResolver(t,e)},this);r._read=function(t){var e=t.readLong(),r=o[e];if(void 0===r)throw new Error(W("invalid union index: %s",e));return o[e]._read(t)}}else this._update(r,t,e);if(!r._read)throw new Error(W("cannot read %s as %s",t,this));return r},i.prototype.decode=function(t,e,r){var n=new H(t,e),i=S(this,n,r);return n.isValid()?{value:i,offset:n.pos}:{value:void 0,offset:-1}},i.prototype.encode=function(t,e,r){var n=new H(e,r);return this._write(n,t),n.isValid()?n.pos:e.length-n.pos},i.prototype.fromBuffer=function(t,e,r){var n=new H(t),i=S(this,n,e,r);if(!n.isValid())throw new Error("truncated buffer");if(!r&&n.pos<t.length)throw new Error("trailing data");return i},i.prototype.toBuffer=function(t){J.pos=0,this._write(J,t),J.isValid()||(i.__reset(2*J.pos),J.pos=0,this._write(J,t));var r=new e(J.pos);return J.buf.copy(r,0,0,J.pos),r},i.prototype.fromString=function(t){return this._copy(JSON.parse(t),{coerce:2})},i.prototype.toString=function(t){return void 0===t?this.getSchema({noDeref:!0}):JSON.stringify(this._copy(t,{coerce:3}))},i.prototype.clone=function(t,e){return e?(e={coerce:0|!!e.coerceBuffers,fieldHook:e.fieldHook,qualifyNames:!!e.qualifyNames,wrap:0|!!e.wrapUnions},this._copy(t,e)):this.fromBuffer(this.toBuffer(t))},i.prototype.isValid=function(t,e){var r,n,i=0|(e&&e.noUndeclaredFields),o=e&&e.errorHook;return o&&(n=[],r=function(e,r){o.call(this,n.slice(),e,r,t)}),this._check(t,i,r,n)},i.prototype.compareBuffers=function(t,e){return this._match(new H(t),new H(e))},i.prototype.getName=function(t){var e=i.isType(this,"logical")?this._underlyingType:this;return e._name||!t?e._name:i.isType(this,"union")?void 0:e.getTypeName()},i.prototype.getSchema=function(t){return I(this,t)},i.prototype.equals=function(t){return i.isType(t)&&this.getFingerprint().equals(t.getFingerprint())},i.prototype.getFingerprint=function(t){return t?U.getHash(this.getSchema(),t):(this._hs||(this._hs=U.getHash(this.getSchema()).toString("binary")),new e(this._hs,"binary"))},i.prototype.inspect=function(){var t=this.getTypeName(),e=N(t);if(O(t))return W("<%s>",e);var r=JSON.parse(this.getSchema({exportAttrs:!0,noDeref:!0}));return"object"!=typeof r||i.isType(this,"logical")||(r.type=void 0),W("<%s %j>",e,r)},i.prototype._check=U.abstractFunction,i.prototype._copy=U.abstractFunction,i.prototype._match=U.abstractFunction,i.prototype._read=U.abstractFunction,i.prototype._skip=U.abstractFunction,i.prototype._update=U.abstractFunction,i.prototype._write=U.abstractFunction,i.prototype.compare=U.abstractFunction,i.prototype.getTypeName=U.abstractFunction,i.prototype.random=U.abstractFunction,Z.inherits(o,i),o.prototype._update=function(t,e){e.constructor===this.constructor&&(t._read=this._read)},o.prototype._copy=function(t){return this._check(t,void 0,j),t},o.prototype.compare=U.compare,o.prototype.toJSON=function(){return this.getTypeName()},Z.inherits(s,o),s.prototype._check=function(t,e,r){var n=null===t;return!n&&r&&r(t,this),n},s.prototype._read=function(){return null},s.prototype._skip=function(){},s.prototype._write=function(t,e){null!==e&&j(e,this)},s.prototype._match=function(){return 0},s.prototype.compare=s.prototype._match,s.prototype.getTypeName=function(){return"null"},s.prototype.random=s.prototype._read,Z.inherits(a,o),a.prototype._check=function(t,e,r){var n="boolean"==typeof t;return!n&&r&&r(t,this),n},a.prototype._read=function(t){return t.readBoolean()},a.prototype._skip=function(t){t.skipBoolean()},a.prototype._write=function(t,e){"boolean"!=typeof e&&j(e,this),t.writeBoolean(e)},a.prototype._match=function(t,e){return t.matchBoolean(e)},a.prototype.getTypeName=function(){return"boolean"},a.prototype.random=function(){return Y.nextBoolean()},Z.inherits(u,o),u.prototype._check=function(t,e,r){var n=t===(0|t);return!n&&r&&r(t,this),n},u.prototype._read=function(t){return t.readInt()},u.prototype._skip=function(t){t.skipInt()},u.prototype._write=function(t,e){e!==(0|e)&&j(e,this),t.writeInt(e)},u.prototype._match=function(t,e){return t.matchInt(e)},u.prototype.getTypeName=function(){return"int"},u.prototype.random=function(){return 0|Y.nextInt(1e3)},Z.inherits(h,o),h.prototype._check=function(t,e,r){var n="number"==typeof t&&t%1===0&&z(t);return!n&&r&&r(t,this),n},h.prototype._read=function(t){var e=t.readLong();if(!z(e))throw new Error("potential precision loss");return e},h.prototype._skip=function(t){t.skipLong()},h.prototype._write=function(t,e){("number"!=typeof e||e%1||!z(e))&&j(e,this),t.writeLong(e)},h.prototype._match=function(t,e){return t.matchLong(e)},h.prototype._update=function(t,e){switch(e.getTypeName()){case"int":case"long":t._read=e._read}},h.prototype.getTypeName=function(){return"long"},h.prototype.random=function(){return Y.nextInt()},h.__with=function(t,e){t=t||{};var r={toBuffer:"_toBuffer",fromBuffer:"_fromBuffer",fromJSON:"_fromJSON",toJSON:"_toJSON",isValid:"_isValid",compare:"compare"},n=new E(e);return Object.keys(r).forEach(function(e){if(void 0===t[e])throw new Error(W("missing method implementation: %s",e));n[r[e]]=t[e]}),n},Z.inherits(c,o),c.prototype._check=function(t,e,r){var n="number"==typeof t;return!n&&r&&r(t,this),n},c.prototype._read=function(t){return t.readFloat()},c.prototype._skip=function(t){t.skipFloat()},c.prototype._write=function(t,e){"number"!=typeof e&&j(e,this),t.writeFloat(e)},c.prototype._match=function(t,e){return t.matchFloat(e)},c.prototype._update=function(t,e){switch(e.getTypeName()){case"float":case"int":case"long":t._read=e._read}},c.prototype.getTypeName=function(){return"float"},c.prototype.random=function(){return Y.nextFloat(1e3)},Z.inherits(f,o),f.prototype._check=function(t,e,r){var n="number"==typeof t;return!n&&r&&r(t,this),n},f.prototype._read=function(t){return t.readDouble()},f.prototype._skip=function(t){t.skipDouble()},f.prototype._write=function(t,e){"number"!=typeof e&&j(e,this),t.writeDouble(e)},f.prototype._match=function(t,e){return t.matchDouble(e)},f.prototype._update=function(t,e){switch(e.getTypeName()){case"double":case"float":case"int":case"long":t._read=e._read}},f.prototype.getTypeName=function(){return"double"},f.prototype.random=function(){return Y.nextFloat()},Z.inherits(l,o),l.prototype._check=function(t,e,r){var n="string"==typeof t;return!n&&r&&r(t,this),n},l.prototype._read=function(t){return t.readString()},l.prototype._skip=function(t){t.skipString()},l.prototype._write=function(t,e){"string"!=typeof e&&j(e,this),t.writeString(e)},l.prototype._match=function(t,e){return t.matchString(e)},l.prototype._update=function(t,e){switch(e.getTypeName()){case"bytes":case"string":t._read=this._read}},l.prototype.getTypeName=function(){return"string"},l.prototype.random=function(){return Y.nextString(Y.nextInt(32))},Z.inherits(p,o),p.prototype._check=function(t,r,n){var i=e.isBuffer(t);return!i&&n&&n(t,this),i},p.prototype._read=function(t){return t.readBytes()},p.prototype._skip=function(t){t.skipBytes()},p.prototype._write=function(t,r){e.isBuffer(r)||j(r,this),t.writeBytes(r)},p.prototype._match=function(t,e){return t.matchBytes(e)},p.prototype._update=l.prototype._update,p.prototype._copy=function(t,r){var n;switch(0|(r&&r.coerce)){case 3:return this._check(t,void 0,j),t.toString("binary");case 2:if("string"!=typeof t)throw new Error(W("cannot coerce to buffer: %j",t));return n=new e(t,"binary"),this._check(n,void 0,j),n;case 1:if(!M(t))throw new Error(W("cannot coerce to buffer: %j",t));return n=new e(t.data),this._check(n,void 0,j),n;default:return this._check(t,void 0,j),new e(t)}},p.prototype.compare=e.compare,p.prototype.getTypeName=function(){return"bytes"},p.prototype.random=function(){return Y.nextBuffer(Y.nextInt(32))},Z.inherits(d,i),d.prototype._skip=function(t){this._types[t.readLong()]._skip(t)},d.prototype._match=function(t,e){var r=t.readLong(),n=e.readLong();return r===n?this._types[r]._match(t,e):r<n?-1:1},d.prototype.getTypes=function(){return this._types.slice()},d.prototype.toJSON=function(){return this._types},Z.inherits(_,d),_.prototype._getIndex=function(t){var e=this._bucketIndices[P(t)];return this._logicalBranches&&(e=this._getLogicalIndex(t,e)),e},_.prototype._getLogicalIndex=function(t,e){var r,n,i,o=this._logicalBranches;for(r=0,n=o.length;r<n;r++)if(i=o[r],i.type._check(t)){if(void 0!==e)throw new Error("ambiguous conversion");e=i.index}return e},_.prototype._check=function(t,e,r,n){var i=this._getIndex(t),o=void 0!==i;return o?this._types[i]._check(t,e,r,n):(r&&r(t,this),o)},_.prototype._read=function(t){var e=t.readLong(),r=this._types[e];if(r)return r._read(t);throw new Error(W("invalid union index: %s",e))},_.prototype._write=function(t,e){var r=this._getIndex(e);void 0===r&&j(e,this),t.writeLong(r),null!==e&&this._types[r]._write(t,e)},_.prototype._update=function(t,e,r){var n,i,o;for(n=0,i=this._types.length;n<i;n++){try{o=this._types[n].createResolver(e,r)}catch(t){continue}return void(t._read=function(t){return o._read(t)})}},_.prototype._copy=function(t,e){var r,n=e&&0|e.coerce,i=e&&0|e.wrap;if(2===i)r=0;else{switch(n){case 1:r=M(t)&&void 0!==this._bucketIndices.buffer?this._bucketIndices.buffer:this._getIndex(t);break;case 2:if(null===t)r=this._bucketIndices.null;else if("object"==typeof t){var o=Object.keys(t);1===o.length&&(r=this._branchIndices[o[0]],t=t[o[0]])}break;default:r=this._getIndex(t)}void 0===r&&j(t,this)}var s=this._types[r];if(null===t||3===i)return s._copy(t,e);switch(n){case 3:var a={};return a[s.getName(!0)]=s._copy(t,e),a;default:return s._copy(t,e)}},_.prototype.compare=function(t,e){var r=this._getIndex(t),n=this._getIndex(e);if(void 0===r)j(t,this);else{if(void 0!==n)return r===n?this._types[r].compare(t,e):U.compare(r,n);j(e,this)}},_.prototype.getTypeName=function(){return"union:unwrapped"},_.prototype.random=function(){var t=Y.nextInt(this._types.length);return this._types[t].random()},Z.inherits(g,d),g.prototype._check=function(t,e,r,n){var i=!1;if(null===t)i=void 0!==this._branchIndices.null;else if("object"==typeof t){var o=Object.keys(t);if(1===o.length){var s=o[0],a=this._branchIndices[s];if(void 0!==a)return r?(n.push(s),i=this._types[a]._check(t[s],e,r,n),n.pop(),i):this._types[a]._check(t[s],e)}}return!i&&r&&r(t,this),i},g.prototype._read=function(t){var e=t.readLong(),r=this._constructors[e];if(r)return new r(this._types[e]._read(t));if(null===r)return null;throw new Error(W("invalid union index: %s",e))},g.prototype._write=function(t,e){var r,n,i;null===e?(r=this._branchIndices.null,void 0===r&&j(e,this),t.writeLong(r)):(n=Object.keys(e),1===n.length&&(i=n[0],r=this._branchIndices[i]),void 0===r&&j(e,this),t.writeLong(r),this._types[r]._write(t,e[i]))},g.prototype._update=function(t,e,r){var n,i,o,s;for(n=0,i=this._types.length;n<i;n++){try{o=this._types[n].createResolver(e,r)}catch(t){continue}return s=this._constructors[n],void(s?t._read=function(t){return new s(o._read(t))}:t._read=function(){return null})}},g.prototype._copy=function(t,e){var r=e&&0|e.wrap;if(2===r)return null===t&&null===this._constructors[0]?null:new this._constructors[0](this._types[0]._copy(t,e));if(null===t&&void 0!==this._branchIndices.null)return null;var n,i,o;if("object"==typeof t){var s=Object.keys(t);if(1===s.length){var a=s[0];if(n=this._branchIndices[a],void 0===n&&e.qualifyNames){var u,h;for(u=0,i=this._types.length;u<i;u++)if(h=this._types[u],h._name&&a===A(h._name)){n=u;break}}void 0!==n&&(o=this._types[n]._copy(t[a],e))}}if(1===r&&void 0===o)for(n=0,i=this._types.length;n<i&&void 0===o;)try{o=this._types[n]._copy(t,e)}catch(t){n++}return void 0!==o?3===r?o:new this._constructors[n](o):void j(t,this)},g.prototype.compare=function(t,e){var r=null===t?"null":Object.keys(t)[0],n=null===e?"null":Object.keys(e)[0],i=this._branchIndices[r];return r===n?"null"===r?0:this._types[i].compare(t[r],e[r]):U.compare(i,this._branchIndices[n])},g.prototype.getTypeName=function(){return"union:wrapped"},g.prototype.random=function(){var t=Y.nextInt(this._types.length),e=this._constructors[t];return e?new e(this._types[t].random()):null},Z.inherits(y,i),y.prototype._check=function(t,e,r){var n=void 0!==this._indices[t];return!n&&r&&r(t,this),n},y.prototype._read=function(t){var e=t.readLong(),r=this._symbols[e];if(void 0===r)throw new Error(W("invalid %s enum index: %s",this._name,e));return r},y.prototype._skip=function(t){t.skipLong()},y.prototype._write=function(t,e){var r=this._indices[e];void 0===r&&j(e,this),t.writeLong(r)},y.prototype._match=function(t,e){return t.matchLong(e)},y.prototype.compare=function(t,e){return U.compare(this._indices[t],this._indices[e])},y.prototype._update=function(t,e){var r=this._symbols;"enum"!==e.getTypeName()||e._name&&!~R(this).indexOf(e._name)||!e._symbols.every(function(t){return~r.indexOf(t)})||(t._symbols=e._symbols,t._read=e._read)},y.prototype._copy=function(t){return this._check(t,void 0,j),t},y.prototype.getAliases=function(){return this._aliases},y.prototype.getSymbols=function(){return this._symbols.slice()},y.prototype.getTypeName=function(){return"enum"},y.prototype.random=function(){return Y.choice(this._symbols)},y.prototype.toJSON=function(){return{name:this._name,type:this.getTypeName(),symbols:this._symbols,aliases:this._aliases}},Z.inherits(v,i),v.prototype._check=function(t,r,n){var i=e.isBuffer(t)&&t.length===this._size;return!i&&n&&n(t,this),i},v.prototype._read=function(t){return t.readFixed(this._size)},v.prototype._skip=function(t){t.skipFixed(this._size)},v.prototype._write=function(t,r){e.isBuffer(r)&&r.length===this._size||j(r,this),t.writeFixed(r,this._size)},v.prototype._match=function(t,e){return t.matchFixed(e,this._size)},v.prototype.compare=e.compare,v.prototype._update=function(t,e){"fixed"!==e.getTypeName()||this._size!==e._size||e._name&&!~R(this).indexOf(e._name)||(t._size=this._size,t._read=this._read)},v.prototype._copy=p.prototype._copy,v.prototype.getAliases=function(){return this._aliases},v.prototype.getSize=function(){return this._size},v.prototype.getTypeName=function(){return"fixed"},v.prototype.random=function(){return Y.nextBuffer(this._size)},v.prototype.toJSON=function(){return{name:this._name,type:this.getTypeName(),size:this._size,aliases:this._aliases}},Z.inherits(m,i),m.prototype._check=function(t,e,r,n){if(!t||"object"!=typeof t||Array.isArray(t))return r&&r(t,this),!1;var i,o,s,a,u=Object.keys(t),h=!0;if(r){for(s=n.length,n.push(""),i=0,o=u.length;i<o;i++)a=n[s]=u[i],this._values._check(t[a],e,r,n)||(h=!1);n.pop()}else for(i=0,o=u.length;i<o;i++)if(!this._values._check(t[u[i]],e))return!1;return h},m.prototype._read=function(t){for(var e,r=this._values,n={};e=B(t);)for(;e--;){var i=t.readString();n[i]=r._read(t)}return n},m.prototype._skip=function(t){for(var e,r,n=this._values;r=t.readLong();)if(r<0)e=t.readLong(),t.pos+=e;else for(;r--;)t.skipString(),n._skip(t)},m.prototype._write=function(t,e){e&&"object"==typeof e&&!Array.isArray(e)||j(e,this);var r,n,i=this._values,o=Object.keys(e),s=o.length;if(s)for(t.writeLong(s),r=0;r<s;r++)n=o[r],t.writeString(n),i._write(t,e[n]);t.writeLong(0)},m.prototype._match=function(){throw new Error("maps cannot be compared")},m.prototype._update=function(t,e,r){"map"===e.getTypeName()&&(t._values=this._values.createResolver(e._values,r),t._read=this._read)},m.prototype._copy=function(t,e){if(t&&"object"==typeof t&&!Array.isArray(t)){var r,n,i,o=this._values,s=Object.keys(t),a={};for(r=0,n=s.length;r<n;r++)i=s[r],a[i]=o._copy(t[i],e);return a}j(t,this)},m.prototype.compare=m.prototype._match,m.prototype.getTypeName=function(){return"map"},m.prototype.getValuesType=function(){return this._values},m.prototype.getKeysType=function(){return this._keys},m.prototype.random=function(){var t,e,r={};for(t=0,e=Y.nextInt(10);t<e;t++)r[Y.nextString(Y.nextInt(20))]=this._values.random();return r},m.prototype.toJSON=function(){return{type:this.getTypeName(),values:this._values}},Z.inherits(w,i),w.prototype._check=function(t,e,r,n){if(!Array.isArray(t))return r&&r(t,this),!1;var i,o,s,a=!0;if(r){for(s=n.length,n.push(""),i=0,o=t.length;i<o;i++)n[s]=""+i,this._items._check(t[i],e,r,n)||(a=!1);n.pop()}else for(i=0,o=t.length;i<o;i++)if(!this._items._check(t[i],e))return!1;return a},w.prototype._read=function(t){for(var e,r,n=this._items,i=[];r=t.readLong();)for(r<0&&(r=-r,t.skipLong()),e=0;e<r;e++)i[e]=n._read(t);return i},w.prototype._skip=function(t){for(var e,r;r=t.readLong();)if(r<0)e=t.readLong(),t.pos+=e;else for(;r--;)this._items._skip(t)},w.prototype._write=function(t,e){Array.isArray(e)||j(e,this);var r,n=e.length;if(n)for(t.writeLong(n),r=0;r<n;r++)this._items._write(t,e[r]);t.writeLong(0)},w.prototype._match=function(t,e){for(var r,n=t.readLong(),i=e.readLong();n&&i;){if(r=this._items._match(t,e))return r;--n||(n=B(t)),--i||(i=B(e))}return U.compare(n,i)},w.prototype._update=function(t,e,r){"array"===e.getTypeName()&&(t._items=this._items.createResolver(e._items,r),t._read=this._read)},w.prototype._copy=function(t,e){Array.isArray(t)||j(t,this);var r,n,i=new Array(t.length);for(r=0,n=t.length;r<n;r++)i[r]=this._items._copy(t[r],e);return i},w.prototype.compare=function(t,e){var r,n,i,o=t.length,s=e.length;for(r=0,n=Math.min(o,s);r<n;r++)if(i=this._items.compare(t[r],e[r]))return i;return U.compare(o,s)},w.prototype.getItemsType=function(){return this._items},w.prototype.getTypeName=function(){return"array"},w.prototype.random=function(){var t,e,r=[];for(t=0,e=Y.nextInt(10);t<e;t++)r.push(this._items.random());return r},w.prototype.toJSON=function(){return{type:this.getTypeName(),items:this._items}},Z.inherits(b,i),b.prototype._getConstructorName=function(){return this._name?A(this._name):this._isError?"Error$":"Record$"},b.prototype._createConstructor=function(){var t,e,r,n,i,o=[],s=[],a=[],u=this._isError?"  Error.call(this);\n":"";for(t=0,e=this._fields.length;t<e;t++)r=this._fields[t],i=r.getDefault,n=r._name,s.push("v"+t),u+="  ",void 0===i()?u+="this."+n+" = v"+t+";\n":(u+="if (v"+t+" === undefined) { ",u+="this."+n+" = d"+a.length+"(); ",u+="} else { this."+n+" = v"+t+"; }\n",o.push("d"+a.length),a.push(i));var h="return function "+this._getConstructorName()+"(";h+=s.join()+") {\n"+u+"};";var c=new Function(o.join(),h).apply(void 0,a),f=this;return c.getType=function(){return f},this._isError&&Z.inherits(c,Error),c.prototype.clone=function(t){return f.clone(this,t)},c.prototype.compare=function(t){return f.compare(this,t)},c.prototype.isValid=function(t){return f.isValid(this,t)},c.prototype.toBuffer=function(){return f.toBuffer(this)},c.prototype.toString=function(){return f.toString(this)},c},b.prototype._createChecker=function(){var t=[],e=[],r=this._getConstructorName(),n="return function check"+r+"(v, f, h, p) {\n";if(n+="  if (\n",n+="    v === null ||\n",n+="    typeof v != 'object' ||\n",n+="    (f && !this._checkFields(v))\n",n+="  ) {\n",n+="    if (h) { h(v, this); }\n",n+="    return false;\n",n+="  }\n",this._fields.length){for(i=0,o=this._fields.length;i<o;i++)s=this._fields[i],t.push("t"+i),e.push(s._type),void 0!==s.getDefault()&&(n+="  var v"+i+" = v."+s._name+";\n");n+="  if (h) {\n",n+="    var b = 1;\n",n+="    var j = p.length;\n",n+="    p.push('');\n";var i,o,s;for(i=0,o=this._fields.length;i<o;i++)s=this._fields[i],n+="    p[j] = '"+s._name+"';\n",n+="    b &= ",void 0===s.getDefault()?n+="t"+i+"._check(v."+s._name+", f, h, p);\n":(n+="v"+i+" === undefined || ",n+="t"+i+"._check(v"+i+", f, h, p);\n");n+="    p.pop();\n",n+="    return !!b;\n",n+="  } else {\n    return (\n      ",n+=this._fields.map(function(t,e){return void 0===t.getDefault()?"t"+e+"._check(v."+t._name+", f)":"(v"+e+" === undefined || t"+e+"._check(v"+e+", f))"}).join(" &&\n      "),n+="\n    );\n  }\n"}else n+="  return true;\n";return n+="};",new Function(t.join(),n).apply(void 0,e)},b.prototype._createReader=function(){var t,e,r=[],n=[this._constructor];for(t=0,e=this._fields.length;t<e;t++)r.push("t"+t),n.push(this._fields[t]._type);var i=this._getConstructorName(),o="return function read"+i+"(t) {\n";return o+="  return new "+i+"(\n    ",o+=r.map(function(t){return t+"._read(t)"}).join(",\n    "),o+="\n  );\n};",r.unshift(i),new Function(r.join(),o).apply(void 0,n)},b.prototype._createSkipper=function(){var t,e,r=[],n="return function skip"+this._getConstructorName()+"(t) {\n",i=[];for(t=0,e=this._fields.length;t<e;t++)r.push("t"+t),i.push(this._fields[t]._type),n+="  t"+t+"._skip(t);\n";return n+="}",new Function(r.join(),n).apply(void 0,i)},b.prototype._createWriter=function(){var t,e,r,n,i=[],o=this._getConstructorName(),s="return function write"+o+"(t, v) {\n",a=[];for(t=0,e=this._fields.length;t<e;t++)r=this._fields[t],i.push("t"+t),a.push(r._type),s+="  ",void 0===r.getDefault()?s+="t"+t+"._write(t, v."+r._name+");\n":(n=r._type.toBuffer(r.getDefault()).toString("binary"),i.push("d"+t),a.push(n),s+="var v"+t+" = v."+r._name+";\n",s+="if (v"+t+" === undefined) {\n",s+="    t.writeBinary(d"+t+", "+n.length+");\n",s+="  } else {\n    t"+t+"._write(t, v"+t+");\n  }\n");return s+="}",new Function(i.join(),s).apply(void 0,a)},b.prototype._update=function(t,e,r){if(e._name&&!~R(this).indexOf(e._name))throw new Error(W("no alias found for %s",e._name));var n,i,o,s,a,u,h=this._fields,c=e._fields,f=U.toMap(c,function(t){return t._name}),l=[],p={};for(n=0;n<h.length;n++){for(o=h[n],a=R(o),u=[],i=0;i<a.length;i++)s=a[i],f[s]&&u.push(s);if(u.length>1)throw new Error(W("multiple matches for %s field",o._name));if(u.length)s=u[0],p[s]={resolver:o._type.createResolver(f[s]._type,r),name:o._name},l.push(o._name);else{if(void 0===o.getDefault())throw new Error(W("no match for default-less %s field",o._name));l.push("undefined")}}var d=-1;for(n=c.length;n&&void 0===p[c[--n]._name];)d=n;var _=this._getConstructorName(),g=[_],y=[this._constructor],v="  return function read"+_+"(t, b) {\n";for(n=0;n<c.length;n++)n===d&&(v+="  if (!b) {\n"),o=e._fields[n],s=o._name,v+=~d&&n>=d?"    ":"  ",void 0===p[s]?(g.push("t"+n),y.push(o._type),v+="t"+n+"._skip(t);\n"):(g.push("t"+n),y.push(p[s].resolver),v+="var "+p[s].name+" = ",v+="t"+n+"._read(t);\n");~d&&(v+="  }\n"),v+="  return new "+_+"("+l.join()+");\n};",t._read=new Function(g.join(),v).apply(void 0,y)},b.prototype._match=function(t,e){var r,n,i,o,s,a=this._fields;for(r=0,n=a.length;r<n;r++)if(i=a[r],o=i._order,s=i._type,o){if(o*=s._match(t,e))return o}else s._skip(t),s._skip(e);return 0},b.prototype._checkFields=function(t){var e,r,n=Object.keys(t);for(e=0,r=n.length;e<r;e++)if(!this._fieldsMap[n[e]])return!1;return!0},b.prototype._copy=function(t,e){var r,n,i,o,s=e&&e.fieldHook,a=[void 0];for(r=0,n=this._fields.length;r<n;r++)i=this._fields[r],o=t[i._name],o=void 0===o&&i.hasOwnProperty("getDefault")?i.getDefault():i._type._copy(t[i._name],e),s&&(o=s(i,o,this)),a.push(o);return new(this._constructor.bind.apply(this._constructor,a))},b.prototype.compare=function(t,e){var r,n,i,o,s,a,u=this._fields;for(r=0,n=u.length;r<n;r++)if(i=u[r],o=i._name,s=i._order,a=i._type,s&&(s*=a.compare(t[o],e[o])))return s;return 0},b.prototype.random=function(){var t=this._fields.map(function(t){return t._type.random()});return t.unshift(void 0),new(this._constructor.bind.apply(this._constructor,t))},b.prototype.getAliases=function(){return this._aliases},b.prototype.getField=function(t){return this._fieldsMap[t];
};b.prototype.getFields=function(){return this._fields.slice()};b.prototype.getRecordConstructor=function(){return this._constructor},b.prototype.getTypeName=function(){return this._isError?"error":"record"},b.prototype.toJSON=function(){return{name:this._name,type:this.getTypeName(),fields:this._fields.map(function(t){return t.toJSON()}),aliases:this._aliases}},Z.inherits(k,i),k.prototype.getTypeName=function(){return"logical:"+this._logicalTypeName},k.prototype.getUnderlyingType=function(){return this._underlyingType},k.prototype._read=function(t){return this._fromValue(this._underlyingType._read(t))},k.prototype._write=function(t,e){this._underlyingType._write(t,this._toValue(e))},k.prototype._check=function(t,e,r,n){try{var i=this._toValue(t)}catch(t){}return void 0===i?(r&&r(t,this),!1):this._underlyingType._check(i,e,r,n)},k.prototype._copy=function(t,e){var r=this._underlyingType;switch(e&&e.coerce){case 3:return r._copy(this._toValue(t),e);case 2:return this._fromValue(r._copy(t,e));default:return this._fromValue(r._copy(this._toValue(t),e))}},k.prototype._update=function(t,e,r){var n=this._resolve(e,r);n&&(t._read=function(t){return n(e._read(t))})},k.prototype.random=function(){return this._fromValue(this._underlyingType.random())},k.prototype.compare=function(t,e){var r=this._toValue(t),n=this._toValue(e);return this._underlyingType.compare(r,n)},k.prototype.toJSON=function(){var t=this.getUnderlyingType().toJSON();return K&&("string"==typeof t&&(t={type:t}),t.logicalType=this._logicalTypeName,this._export(t)),t},k.prototype._export=function(){},k.prototype._fromValue=U.abstractFunction,k.prototype._toValue=U.abstractFunction,k.prototype._resolve=U.abstractFunction,Z.inherits(E,h),E.prototype._check=function(t,e,r){var n=this._isValid(t);return!n&&r&&r(t,this),n},E.prototype._read=function(t){var e,r;if(this._noUnpack?(r=t.pos,t.skipLong(),e=t.buf.slice(r,t.pos)):e=t.unpackLongBytes(t),t.isValid())return this._fromBuffer(e)},E.prototype._write=function(t,e){this._isValid(e)||j(e,this);var r=this._toBuffer(e);this._noUnpack?t.writeFixed(r):t.packLongBytes(r)},E.prototype._copy=function(t,e){switch(e&&e.coerce){case 3:return this._toJSON(t);case 2:return this._fromJSON(t);default:return this._fromJSON(JSON.parse(JSON.stringify(this._toJSON(t))))}},E.prototype.random=function(){return this._fromJSON(h.prototype.random())},E.prototype._fromBuffer=U.abstractFunction,E.prototype._toBuffer=U.abstractFunction,E.prototype._fromJSON=U.abstractFunction,E.prototype._toJSON=U.abstractFunction,E.prototype._isValid=U.abstractFunction,E.prototype.compare=U.abstractFunction,x.prototype.getAliases=function(){return this._aliases},x.prototype.getDefault=function(){},x.prototype.getName=function(){return this._name},x.prototype.getOrder=function(){return["descending","ignore","ascending"][this._order+1]},x.prototype.getType=function(){return this._type},x.prototype.toJSON=function(){var t=this.getDefault();return void 0!==t&&(t=this._type._copy(t,{coerce:3,wrap:3})),{name:this._name,type:this._type,default:t,order:this.getOrder(),aliases:this._aliases}},x.prototype.inspect=x.prototype.toJSON,T.prototype.inspect=function(){return"<Resolver>"},t.exports={Type:i,createType:n,getTypeBucket:D,getValueBucket:P,isPrimitive:O,isValidName:F,qualify:L,stringify:I,builtins:function(){var t,e,r,n={LogicalType:k,UnwrappedUnionType:_,WrappedUnionType:g},i=Object.keys(q);for(t=0,e=i.length;t<e;t++)r=i[t],n[N(r)]=q[r];return n}()}}).call(e,r(1).Buffer)},function(t,e,r){(function(e){"use strict";function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}function i(t,e){return t===e?0:t<e?-1:1}function o(t,e,r){var n=t[e];return void 0===n?r:n}function s(t,e){e=e||"md5";var r=g.createHash(e);return r.end(t),r.read()}function a(t,e){var r,n,i=-1;if(!t)return-1;for(r=0,n=t.length;r<n;r++)if(t[r]===e){if(i>=0)return-2;i=r}return i}function u(t,e){var r,n,i={};for(r=0;r<t.length;r++)n=t[r],i[e(n)]=n;return i}function h(t,e){var r,n,i,o={};for(r=0,n=t.length;r<n;r++){if(i=t[r],e&&(i=e(i)),o[i])return!0;o[i]=!0}return!1}function c(t,e){e|=0;var r=t.charAt(e++);if(/[\d-]/.test(r)){for(;/[eE\d.+-]/.test(t.charAt(e));)e++;return e}if(/true|null/.test(t.slice(e-1,e+3)))return e+3;if(/false/.test(t.slice(e-1,e+4)))return e+4;var n=0,i=!1;do switch(r){case"{":case"[":i||n++;break;case"}":case"]":if(!i&&!--n)return e;break;case'"':if(i=!i,!n&&!i)return e;break;case"\\":e++}while(r=t.charAt(e++));return-1}function f(){throw new Error("abstract")}function l(t){var e=1103515245,r=12345,n=Math.pow(2,31),i=Math.floor(t||Math.random()*(n-1));this._max=n,this._nextInt=function(){return i=(e*i+r)%n}}function p(){this._index=0,this._items=[]}function d(t,e){if(this.buf=t,this.pos=0|e,this.pos<0)throw new Error("negative offset")}function _(t,e){for(;e--;)t[e]=~t[e]}var g=r(11);l.prototype.nextBoolean=function(){return!!(this._nextInt()%2)},l.prototype.nextInt=function(t,e){return void 0===e&&(e=t,t=0),e=void 0===e?this._max:e,t+Math.floor(this.nextFloat()*(e-t))},l.prototype.nextFloat=function(t,e){return void 0===e&&(e=t,t=0),e=void 0===e?1:e,t+(e-t)*this._nextInt()/this._max},l.prototype.nextString=function(t,e){t|=0,e=e||"aA";var r="";e.indexOf("a")>-1&&(r+="abcdefghijklmnopqrstuvwxyz"),e.indexOf("A")>-1&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.indexOf("#")>-1&&(r+="0123456789"),e.indexOf("!")>-1&&(r+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var n=[],i=0;i<t;i++)n.push(this.choice(r));return n.join("")},l.prototype.nextBuffer=function(t){var r,n=[];for(r=0;r<t;r++)n.push(this.nextInt(256));return new e(n)},l.prototype.choice=function(t){var e=t.length;if(!e)throw new Error("choosing from empty array");return t[this.nextInt(e)]},p.prototype.push=function(t){var e,r=this._items,n=0|r.length;for(r.push(t);n>0&&r[n].index<r[e=n-1>>1].index;)t=r[n],r[n]=r[e],r[e]=t,n=e},p.prototype.pop=function(){var t=this._items,e=t.length-1|0,r=t[0];if(!r||r.index>this._index)return null;if(this._index++,!e)return t.pop(),r;t[0]=t.pop();for(var n,i,o,s,a,u,h,c=e>>1,f=0;f<c&&(s=t[f],n=(f<<1)+1,i=f+1<<1,u=t[n],h=t[i],!h||u.index<=h.index?(a=u,o=n):(a=h,o=i),!(a.index>=s.index));)t[o]=s,t[f]=a,f=o;return r},d.prototype.isValid=function(){return this.pos<=this.buf.length},d.prototype.readBoolean=function(){return!!this.buf[this.pos++]},d.prototype.skipBoolean=function(){this.pos++},d.prototype.writeBoolean=function(t){this.buf[this.pos++]=!!t},d.prototype.readInt=d.prototype.readLong=function(){var t,e,r,n,i=0,o=0,s=this.buf;do t=s[this.pos++],e=128&t,i|=(127&t)<<o,o+=7;while(e&&o<28);if(e){r=i,n=268435456;do t=s[this.pos++],r+=(127&t)*n,n*=128;while(128&t);return(r%2?-(r+1):r)/2}return i>>1^-(1&i)},d.prototype.skipInt=d.prototype.skipLong=function(){for(var t=this.buf;128&t[this.pos++];);},d.prototype.writeInt=d.prototype.writeLong=function(t){var e,r,n=this.buf;if(t>=-1073741824&&t<1073741824){r=t>=0?t<<1:~t<<1|1;do n[this.pos]=127&r,r>>=7;while(r&&(n[this.pos++]|=128))}else{e=t>=0?2*t:2*-t-1;do n[this.pos]=127&e,e/=128;while(e>=1&&(n[this.pos++]|=128))}this.pos++},d.prototype.readFloat=function(){var t=this.buf,e=this.pos;if(this.pos+=4,!(this.pos>t.length))return this.buf.readFloatLE(e)},d.prototype.skipFloat=function(){this.pos+=4},d.prototype.writeFloat=function(t){var e=this.buf,r=this.pos;if(this.pos+=4,!(this.pos>e.length))return this.buf.writeFloatLE(t,r)},d.prototype.readDouble=function(){var t=this.buf,e=this.pos;if(this.pos+=8,!(this.pos>t.length))return this.buf.readDoubleLE(e)},d.prototype.skipDouble=function(){this.pos+=8},d.prototype.writeDouble=function(t){var e=this.buf,r=this.pos;if(this.pos+=8,!(this.pos>e.length))return this.buf.writeDoubleLE(t,r)},d.prototype.readFixed=function(t){var r=this.pos;if(this.pos+=t,!(this.pos>this.buf.length)){var n=new e(t);return this.buf.copy(n,0,r,r+t),n}},d.prototype.skipFixed=function(t){this.pos+=t},d.prototype.writeFixed=function(t,e){e=e||t.length;var r=this.pos;this.pos+=e,this.pos>this.buf.length||t.copy(this.buf,r,0,e)},d.prototype.readBytes=function(){return this.readFixed(this.readLong())},d.prototype.skipBytes=function(){var t=this.readLong();this.pos+=t},d.prototype.writeBytes=function(t){var e=t.length;this.writeLong(e),this.writeFixed(t,e)},d.prototype.readString=function(){var t=this.readLong(),e=this.pos,r=this.buf;if(this.pos+=t,!(this.pos>r.length))return this.buf.utf8Slice(e,e+t)},d.prototype.skipString=function(){var t=this.readLong();this.pos+=t},d.prototype.writeString=function(t){var r=e.byteLength(t);this.writeLong(r);var n=this.pos;this.pos+=r,this.pos>this.buf.length||this.buf.utf8Write(t,n,r)},d.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,this.pos>this.buf.length||(this.buf.latin1Write?this.buf.latin1Write(t,r,e):this.buf.binaryWrite(t,r,e))},d.prototype.matchBoolean=function(t){return this.buf[this.pos++]-t.buf[t.pos++]},d.prototype.matchInt=d.prototype.matchLong=function(t){var e=this.readLong(),r=t.readLong();return e===r?0:e<r?-1:1},d.prototype.matchFloat=function(t){var e=this.readFloat(),r=t.readFloat();return e===r?0:e<r?-1:1},d.prototype.matchDouble=function(t){var e=this.readDouble(),r=t.readDouble();return e===r?0:e<r?-1:1},d.prototype.matchFixed=function(t,e){return this.readFixed(e).compare(t.readFixed(e))},d.prototype.matchBytes=d.prototype.matchString=function(t){var e=this.readLong(),r=this.pos;this.pos+=e;var n=t.readLong(),i=t.pos;t.pos+=n;var o=this.buf.slice(r,this.pos),s=t.buf.slice(i,t.pos);return o.compare(s)},d.prototype.unpackLongBytes=function(){var t,r,n=new e(8),i=0,o=0,s=6,a=this.buf;for(t=a[this.pos++],r=1&t,n.fill(0),i|=(127&t)>>1;128&t;)t=a[this.pos++],i|=(127&t)<<s,s+=7,s>=8&&(s-=8,n[o++]=i,i>>=8);return n[o]=i,r&&_(n,8),n},d.prototype.packLongBytes=function(t){var e,r=(128&t[7])>>7,n=this.buf,i=1,o=0,s=3;r?(_(t,8),e=1):e=0;for(var a=[t.readUIntLE(0,3),t.readUIntLE(3,3),t.readUIntLE(6,2)];s&&!a[--s];);for(;o<s;)for(e|=a[o++]<<i,i+=24;i>7;)n[this.pos++]=127&e|128,e>>=7,i-=7;e|=a[s]<<i;do n[this.pos]=127&e,e>>=7;while(e&&(n[this.pos++]|=128));this.pos++,r&&_(t,8)},t.exports={abstractFunction:f,capitalize:n,getHash:s,compare:i,getOption:o,jsonEnd:c,toMap:u,singleIndexOf:a,hasDuplicates:h,Lcg:l,OrderedQueue:p,Tap:d}}).call(e,r(1).Buffer)},function(t,e,r){(function(e){"use strict";function r(t){if("md5"!==t)throw new Error("only md5 is supported in the browser");return new n}function n(){this.data=void 0}function i(t,e){var r=t[0],n=t[1],i=t[2],o=t[3];r=s(r,n,i,o,e[0],7,-680876936),o=s(o,r,n,i,e[1],12,-389564586),i=s(i,o,r,n,e[2],17,606105819),n=s(n,i,o,r,e[3],22,-1044525330),r=s(r,n,i,o,e[4],7,-176418897),o=s(o,r,n,i,e[5],12,1200080426),i=s(i,o,r,n,e[6],17,-1473231341),n=s(n,i,o,r,e[7],22,-45705983),r=s(r,n,i,o,e[8],7,1770035416),o=s(o,r,n,i,e[9],12,-1958414417),i=s(i,o,r,n,e[10],17,-42063),n=s(n,i,o,r,e[11],22,-1990404162),r=s(r,n,i,o,e[12],7,1804603682),o=s(o,r,n,i,e[13],12,-40341101),i=s(i,o,r,n,e[14],17,-1502002290),n=s(n,i,o,r,e[15],22,1236535329),r=a(r,n,i,o,e[1],5,-165796510),o=a(o,r,n,i,e[6],9,-1069501632),i=a(i,o,r,n,e[11],14,643717713),n=a(n,i,o,r,e[0],20,-373897302),r=a(r,n,i,o,e[5],5,-701558691),o=a(o,r,n,i,e[10],9,38016083),i=a(i,o,r,n,e[15],14,-660478335),n=a(n,i,o,r,e[4],20,-405537848),r=a(r,n,i,o,e[9],5,568446438),o=a(o,r,n,i,e[14],9,-1019803690),i=a(i,o,r,n,e[3],14,-187363961),n=a(n,i,o,r,e[8],20,1163531501),r=a(r,n,i,o,e[13],5,-1444681467),o=a(o,r,n,i,e[2],9,-51403784),i=a(i,o,r,n,e[7],14,1735328473),n=a(n,i,o,r,e[12],20,-1926607734),r=u(r,n,i,o,e[5],4,-378558),o=u(o,r,n,i,e[8],11,-2022574463),i=u(i,o,r,n,e[11],16,1839030562),n=u(n,i,o,r,e[14],23,-35309556),r=u(r,n,i,o,e[1],4,-1530992060),o=u(o,r,n,i,e[4],11,1272893353),i=u(i,o,r,n,e[7],16,-155497632),n=u(n,i,o,r,e[10],23,-1094730640),r=u(r,n,i,o,e[13],4,681279174),o=u(o,r,n,i,e[0],11,-358537222),i=u(i,o,r,n,e[3],16,-722521979),n=u(n,i,o,r,e[6],23,76029189),r=u(r,n,i,o,e[9],4,-640364487),o=u(o,r,n,i,e[12],11,-421815835),i=u(i,o,r,n,e[15],16,530742520),n=u(n,i,o,r,e[2],23,-995338651),r=h(r,n,i,o,e[0],6,-198630844),o=h(o,r,n,i,e[7],10,1126891415),i=h(i,o,r,n,e[14],15,-1416354905),n=h(n,i,o,r,e[5],21,-57434055),r=h(r,n,i,o,e[12],6,1700485571),o=h(o,r,n,i,e[3],10,-1894986606),i=h(i,o,r,n,e[10],15,-1051523),n=h(n,i,o,r,e[1],21,-2054922799),r=h(r,n,i,o,e[8],6,1873313359),o=h(o,r,n,i,e[15],10,-30611744),i=h(i,o,r,n,e[6],15,-1560198380),n=h(n,i,o,r,e[13],21,1309151649),r=h(r,n,i,o,e[4],6,-145523070),o=h(o,r,n,i,e[11],10,-1120210379),i=h(i,o,r,n,e[2],15,718787259),n=h(n,i,o,r,e[9],21,-343485551),t[0]=p(r,t[0]),t[1]=p(n,t[1]),t[2]=p(i,t[2]),t[3]=p(o,t[3])}function o(t,e,r,n,i,o){return e=p(p(e,t),p(n,o)),p(e<<i|e>>>32-i,r)}function s(t,e,r,n,i,s,a){return o(e&r|~e&n,t,e,i,s,a)}function a(t,e,r,n,i,s,a){return o(e&n|r&~n,t,e,i,s,a)}function u(t,e,r,n,i,s,a){return o(e^r^n,t,e,i,s,a)}function h(t,e,r,n,i,s,a){return o(r^(e|~n),t,e,i,s,a)}function c(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)i(n,f(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(i(n,o),e=0;e<16;e++)o[e]=0;return o[14]=8*r,i(n,o),n}function f(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}function l(t){var r,n=c(t),i=new e(16);for(r=0;r<4;r++)i.writeIntLE(n[r],4*r,4);return i}function p(t,e){return t+e&4294967295}n.prototype.end=function(t){this.data=t},n.prototype.read=function(){return l(this.data)},t.exports={createHash:r}}).call(e,r(1).Buffer)},function(t,e,r){(function(t,n){function i(t,r){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_(r)?n.showHidden=r:r&&e._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function u(t,r,n){if(t.customInspect&&r&&S(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return m(i)||(i=u(t,i,n)),i}var o=h(t,r);if(o)return o;var s=Object.keys(r),_=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),T(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(r);if(0===s.length){if(S(r)){var g=r.name?": "+r.name:"";return t.stylize("[Function"+g+"]","special")}if(k(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return t.stylize(Date.prototype.toString.call(r),"date");if(T(r))return c(r)}var y="",v=!1,w=["{","}"];if(d(r)&&(v=!0,w=["[","]"]),S(r)){var b=r.name?": "+r.name:"";y=" [Function"+b+"]"}if(k(r)&&(y=" "+RegExp.prototype.toString.call(r)),x(r)&&(y=" "+Date.prototype.toUTCString.call(r)),T(r)&&(y=" "+c(r)),0===s.length&&(!v||0==r.length))return w[0]+y+w[1];if(n<0)return k(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special");t.seen.push(r);var E;return E=v?f(t,r,n,_,s):s.map(function(e){return l(t,r,n,_,e,v)}),t.seen.pop(),p(E,y,w)}function h(t,e){if(b(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return v(e)?t.stylize(""+e,"number"):_(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)N(e,String(s))?o.push(l(t,e,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,r,n,i,!0))}),o}function l(t,e,r,n,i,o){var s,a,h;if(h=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},h.get?a=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(a=t.stylize("[Setter]","special")),N(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(h.value)<0?(a=g(r)?u(t,h.value,null):u(t,h.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,r){var n=0,i=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function d(t){return Array.isArray(t)}function _(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return null==t}function v(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function b(t){return void 0===t}function k(t){return E(t)&&"[object RegExp]"===L(t)}function E(t){return"object"==typeof t&&null!==t}function x(t){return E(t)&&"[object Date]"===L(t)}function T(t){return E(t)&&("[object Error]"===L(t)||t instanceof Error)}function S(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function L(t){return Object.prototype.toString.call(t)}function R(t){return t<10?"0"+t.toString(10):t.toString(10)}function O(){var t=new Date,e=[R(t.getHours()),R(t.getMinutes()),R(t.getSeconds())].join(":");return[t.getDate(),M[t.getMonth()],e].join(" ")}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var B=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(t).replace(B,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}}),a=n[r];r<o;a=n[++r])s+=g(a)||!E(a)?" "+a:" "+i(a);return s},e.deprecate=function(r,i){function o(){if(!s){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),s=!0}return r.apply(this,arguments)}if(b(t.process))return function(){return e.deprecate(r,i).apply(this,arguments)};if(n.noDeprecation===!0)return r;var s=!1;return o};var I,z={};e.debuglog=function(t){if(b(I)&&(I=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!z[t])if(new RegExp("\\b"+t+"\\b","i").test(I)){var r=n.pid;z[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else z[t]=function(){};return z[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=_,e.isNull=g,e.isNullOrUndefined=y,e.isNumber=v,e.isString=m,e.isSymbol=w,e.isUndefined=b,e.isRegExp=k,e.isObject=E,e.isDate=x,e.isError=T,e.isFunction=S,e.isPrimitive=A,e.isBuffer=r(13);var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",O(),e.format.apply(e,arguments))},e.inherits=r(14),e._extend=function(t,e){if(!e||!E(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(e,function(){return this}(),r(6))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){function n(){i.call(this)}t.exports=n;var i=r(16).EventEmitter,o=r(17);o(n,i),n.Readable=r(18),n.Writable=r(28),n.Duplex=r(29),n.Transform=r(30),n.PassThrough=r(31),n.Stream=n,n.prototype.pipe=function(t,e){function r(e){t.writable&&!1===t.write(e)&&h.pause&&h.pause()}function n(){h.readable&&h.resume&&h.resume()}function o(){c||(c=!0,t.end())}function s(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){h.removeListener("data",r),t.removeListener("drain",n),h.removeListener("end",o),h.removeListener("close",s),h.removeListener("error",a),t.removeListener("error",a),h.removeListener("end",u),h.removeListener("close",u),t.removeListener("close",u)}var h=this;h.on("data",r),t.on("drain",n),t._isStdio||e&&e.end===!1||(h.on("end",o),h.on("close",s));var c=!1;return h.on("error",a),t.on("error",a),h.on("end",u),h.on("close",u),t.on("close",u),t.emit("pipe",h),t}},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,a,u,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(r=this._events[t],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(o(r))for(a=Array.prototype.slice.call(arguments,1),h=r.slice(),i=h.length,u=0;u<i;u++)h[u].apply(this,a);return!0},r.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,i,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],s=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(a=s;a-- >0;)if(r[a]===e||r[a].listener&&r[a].listener===e){i=a;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){(function(n){e=t.exports=r(19),e.Stream=r(15),e.Readable=e,e.Writable=r(24),e.Duplex=r(23),e.Transform=r(26),e.PassThrough=r(27),n.browser||"disable"!==n.env.READABLE_STREAM||(t.exports=r(15))}).call(e,r(6))},function(t,e,r){(function(e){function n(t,e){var n=r(23);t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,e instanceof n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(L||(L=r(25).StringDecoder),this.decoder=new L(t.encoding),this.encoding=t.encoding)}function i(t){r(23);return this instanceof i?(this._readableState=new n(t,this),this.readable=!0,void S.call(this)):new i(t)}function o(t,e,r,n,i){var o=h(e,r);if(o)t.emit("error",o);else if(A.isNullOrUndefined(r))e.reading=!1,e.ended||c(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||i||n||(r=e.decoder.write(r)),i||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&f(t)),p(t,e);else i||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=O)t=O;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||A.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function h(t,e){var r=null;return A.isBuffer(e)||A.isString(e)||A.isNullOrUndefined(e)||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function c(t,e){if(e.decoder&&!e.ended){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,f(t)}function f(t){var r=t._readableState;r.needReadable=!1,r.emittedReadable||(R("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?e.nextTick(function(){l(t)}):l(t))}function l(t){R("emit readable"),t.emit("readable"),v(t)}function p(t,r){r.readingMore||(r.readingMore=!0,e.nextTick(function(){d(t,r)}))}function d(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(R("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function _(t){return function(){var e=t._readableState;R("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&T.listenerCount(t,"data")&&(e.flowing=!0,v(t))}}function g(t,r){r.resumeScheduled||(r.resumeScheduled=!0,e.nextTick(function(){y(t,r)}))}function y(t,e){e.resumeScheduled=!1,t.emit("resume"),v(t),e.flowing&&!e.reading&&t.read(0)}function v(t){var e=t._readableState;if(R("flow",e.flowing),e.flowing)do var r=t.read();while(null!==r&&e.flowing)}function m(t,e){var r,n=e.buffer,i=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!t||t>=i)r=o?n.join(""):x.concat(n,i),n.length=0;else if(t<n[0].length){var a=n[0];r=a.slice(0,t),n[0]=a.slice(t)}else if(t===n[0].length)r=n.shift();else{r=o?"":new x(t);for(var u=0,h=0,c=n.length;h<c&&u<t;h++){var a=n[0],f=Math.min(t-u,a.length);o?r+=a.slice(0,f):a.copy(r,u,0,f),f<a.length?n[0]=a.slice(f):n.shift(),u+=f}}return r}function w(t){var r=t._readableState;if(r.length>0)throw new Error("endReadable called on non-empty stream");r.endEmitted||(r.ended=!0,e.nextTick(function(){r.endEmitted||0!==r.length||(r.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function b(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r)}function k(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}t.exports=i;var E=r(20),x=r(1).Buffer;i.ReadableState=n;var T=r(16).EventEmitter;T.listenerCount||(T.listenerCount=function(t,e){return t.listeners(e).length});var S=r(15),A=r(21);A.inherits=r(17);var L,R=r(22);R=R&&R.debuglog?R.debuglog("stream"):function(){},A.inherits(i,S),i.prototype.push=function(t,e){var r=this._readableState;return A.isString(t)&&!r.objectMode&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=new x(t,e),e="")),o(this,r,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(t){return L||(L=r(25).StringDecoder),this._readableState.decoder=new L(t),this._readableState.encoding=t,this};var O=8388608;i.prototype.read=function(t){R("read",t);var e=this._readableState,r=t;if((!A.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return R("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?w(this):f(this),null;if(t=u(t,e),0===t&&e.ended)return 0===e.length&&w(this),null;var n=e.needReadable;R("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&(n=!0,R("length less than watermark",n)),(e.ended||e.reading)&&(n=!1,R("reading or ended",n)),n&&(R("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),n&&!e.reading&&(t=u(r,e));var i;return i=t>0?m(t,e):null,A.isNull(i)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),r!==t&&e.ended&&0===e.length&&w(this),A.isNull(i)||this.emit("data",i),i},i.prototype._read=function(t){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,r){function n(t){R("onunpipe"),t===f&&o()}function i(){R("onend"),t.end()}function o(){R("cleanup"),t.removeListener("close",u),t.removeListener("finish",h),t.removeListener("drain",g),t.removeListener("error",a),t.removeListener("unpipe",n),f.removeListener("end",i),f.removeListener("end",o),f.removeListener("data",s),!l.awaitDrain||t._writableState&&!t._writableState.needDrain||g()}function s(e){R("ondata");var r=t.write(e);!1===r&&(R("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,f.pause())}function a(e){R("onerror",e),c(),t.removeListener("error",a),0===T.listenerCount(t,"error")&&t.emit("error",e)}function u(){t.removeListener("finish",h),c()}function h(){R("onfinish"),t.removeListener("close",u),c()}function c(){R("unpipe"),f.unpipe(t)}var f=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=t;break;case 1:l.pipes=[l.pipes,t];break;default:l.pipes.push(t)}l.pipesCount+=1,R("pipe count=%d opts=%j",l.pipesCount,r);var p=(!r||r.end!==!1)&&t!==e.stdout&&t!==e.stderr,d=p?i:o;l.endEmitted?e.nextTick(d):f.once("end",d),t.on("unpipe",n);var g=_(f);return t.on("drain",g),f.on("data",s),t._events&&t._events.error?E(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),
t.once("close",u),t.once("finish",h),t.emit("pipe",f),l.flowing||(R("pipe resume"),f.resume()),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var i=k(e.pipes,t);return i===-1?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,r){var n=S.prototype.on.call(this,t,r);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&f(this,i);else{var o=this;e.nextTick(function(){R("readable nexttick read 0"),o.read(0)})}}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var t=this._readableState;return t.flowing||(R("resume"),t.flowing=!0,t.reading||(R("resume read 0"),this.read(0)),g(this,t)),this},i.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(R("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(i){if(R("wrapped data"),e.decoder&&(i=e.decoder.write(i)),i&&(e.objectMode||i.length)){var o=n.push(i);o||(r=!0,t.pause())}});for(var i in t)A.isFunction(t[i])&&A.isUndefined(this[i])&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return b(o,function(e){t.on(e,n.emit.bind(n,e))}),n._read=function(e){R("wrapped _read",e),r&&(r=!1,t.resume())},n},i._fromList=m}).call(e,r(6))},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,r){(function(t){function r(t){return Array.isArray?Array.isArray(t):"[object Array]"===g(t)}function n(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function h(t){return void 0===t}function c(t){return"[object RegExp]"===g(t)}function f(t){return"object"==typeof t&&null!==t}function l(t){return"[object Date]"===g(t)}function p(t){return"[object Error]"===g(t)||t instanceof Error}function d(t){return"function"==typeof t}function _(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function g(t){return Object.prototype.toString.call(t)}e.isArray=r,e.isBoolean=n,e.isNull=i,e.isNullOrUndefined=o,e.isNumber=s,e.isString=a,e.isSymbol=u,e.isUndefined=h,e.isRegExp=c,e.isObject=f,e.isDate=l,e.isError=p,e.isFunction=d,e.isPrimitive=_,e.isBuffer=t.isBuffer}).call(e,r(1).Buffer)},function(t,e){},function(t,e,r){(function(e){function n(t){return this instanceof n?(u.call(this,t),h.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(t)}function i(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}function o(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r)}t.exports=n;var s=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},a=r(21);a.inherits=r(17);var u=r(19),h=r(24);a.inherits(n,u),o(s(h.prototype),function(t){n.prototype[t]||(n.prototype[t]=h.prototype[t])})}).call(e,r(6))},function(t,e,r){(function(e){function n(t,e,r){this.chunk=t,this.encoding=e,this.callback=r}function i(t,e){var n=r(23);t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!t.objectMode,e instanceof n&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){p(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var e=r(23);return this instanceof o||this instanceof e?(this._writableState=new i(t,this),this.writable=!0,void E.call(this)):new o(t)}function s(t,r,n){var i=new Error("write after end");t.emit("error",i),e.nextTick(function(){n(i)})}function a(t,r,n,i){var o=!0;if(!(k.isBuffer(n)||k.isString(n)||k.isNullOrUndefined(n)||r.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),e.nextTick(function(){i(s)}),o=!1}return o}function u(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&k.isString(e)&&(e=new b(e,r)),e}function h(t,e,r,i,o){r=u(e,r,i),k.isBuffer(r)&&(i="buffer");var s=e.objectMode?1:r.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new n(r,i,o)):c(t,e,!1,s,r,i,o),a}function c(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function f(t,r,n,i,o){n?e.nextTick(function(){r.pendingcb--,o(i)}):(r.pendingcb--,o(i)),t._writableState.errorEmitted=!0,t.emit("error",i)}function l(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function p(t,r){var n=t._writableState,i=n.sync,o=n.writecb;if(l(n),r)f(t,n,i,r,o);else{var s=y(t,n);s||n.corked||n.bufferProcessing||!n.buffer.length||g(t,n),i?e.nextTick(function(){d(t,n,s,o)}):d(t,n,s,o)}}function d(t,e,r,n){r||_(t,e),e.pendingcb--,n(),m(t,e)}function _(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function g(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var r=[],n=0;n<e.buffer.length;n++)r.push(e.buffer[n].callback);e.pendingcb++,c(t,e,!0,e.length,e.buffer,"",function(t){for(var n=0;n<r.length;n++)e.pendingcb--,r[n](t)}),e.buffer=[]}else{for(var n=0;n<e.buffer.length;n++){var i=e.buffer[n],o=i.chunk,s=i.encoding,a=i.callback,u=e.objectMode?1:o.length;if(c(t,e,!1,u,o,s,a),e.writing){n++;break}}n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}e.bufferProcessing=!1}function y(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function v(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function m(t,e){var r=y(t,e);return r&&(0===e.pendingcb?(v(t,e),e.finished=!0,t.emit("finish")):v(t,e)),r}function w(t,r,n){r.ending=!0,m(t,r),n&&(r.finished?e.nextTick(n):t.once("finish",n)),r.ended=!0}t.exports=o;var b=r(1).Buffer;o.WritableState=i;var k=r(21);k.inherits=r(17);var E=r(15);k.inherits(o,E),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,r){var n=this._writableState,i=!1;return k.isFunction(e)&&(r=e,e=null),k.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),k.isFunction(r)||(r=function(){}),n.ended?s(this,n,r):a(this,n,t,r)&&(n.pendingcb++,i=h(this,n,t,e,r)),i},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||g(this,t))},o.prototype._write=function(t,e,r){r(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,r){var n=this._writableState;k.isFunction(t)?(r=t,t=null,e=null):k.isFunction(e)&&(r=e,e=null),k.isNullOrUndefined(t)||this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||w(this,n,r)}}).call(e,r(6))},function(t,e,r){function n(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=r(1).Buffer,u=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},h=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),n(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};h.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";t=t.slice(r,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(!(n>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,n=e.charCodeAt(i);if(n>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},h.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(e<=2&&r>>4==14){this.charLength=3;break}if(e<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=e},h.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i)}return e}},function(t,e,r){function n(t,e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,u.isNullOrUndefined(r)||t.push(r),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new n(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=t._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}t.exports=o;var a=r(23),u=r(21);u.inherits=r(17),u.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,r){throw new Error("not implemented")},o.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;u.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},function(t,e,r){function n(t){return this instanceof n?void i.call(this,t):new n(t)}t.exports=n;var i=r(26),o=r(21);o.inherits=r(17),o.inherits(n,i),n.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){t.exports=r(24)},function(t,e,r){t.exports=r(23)},function(t,e,r){t.exports=r(26)},function(t,e,r){t.exports=r(27)},function(t,e,r){(function(t,n){function i(e,r,n){function i(){for(var t;null!==(t=e.read());)a.push(t),u+=t.length;e.once("readable",i)}function o(t){e.removeListener("end",s),e.removeListener("readable",i),n(t)}function s(){var r=t.concat(a,u);a=[],n(null,r),e.close()}var a=[],u=0;e.on("error",o),e.on("end",s),e.end(r),i()}function o(e,r){if("string"==typeof r&&(r=new t(r)),!t.isBuffer(r))throw new TypeError("Not a string or buffer");var n=_.Z_FINISH;return e._processChunk(r,n)}function s(t){return this instanceof s?void p.call(this,t,_.DEFLATE):new s(t)}function a(t){return this instanceof a?void p.call(this,t,_.INFLATE):new a(t)}function u(t){return this instanceof u?void p.call(this,t,_.GZIP):new u(t)}function h(t){return this instanceof h?void p.call(this,t,_.GUNZIP):new h(t)}function c(t){return this instanceof c?void p.call(this,t,_.DEFLATERAW):new c(t)}function f(t){return this instanceof f?void p.call(this,t,_.INFLATERAW):new f(t)}function l(t){return this instanceof l?void p.call(this,t,_.UNZIP):new l(t)}function p(r,n){if(this._opts=r=r||{},this._chunkSize=r.chunkSize||e.Z_DEFAULT_CHUNK,d.call(this,r),r.flush&&r.flush!==_.Z_NO_FLUSH&&r.flush!==_.Z_PARTIAL_FLUSH&&r.flush!==_.Z_SYNC_FLUSH&&r.flush!==_.Z_FULL_FLUSH&&r.flush!==_.Z_FINISH&&r.flush!==_.Z_BLOCK)throw new Error("Invalid flush flag: "+r.flush);if(this._flushFlag=r.flush||_.Z_NO_FLUSH,r.chunkSize&&(r.chunkSize<e.Z_MIN_CHUNK||r.chunkSize>e.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+r.chunkSize);if(r.windowBits&&(r.windowBits<e.Z_MIN_WINDOWBITS||r.windowBits>e.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+r.windowBits);if(r.level&&(r.level<e.Z_MIN_LEVEL||r.level>e.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+r.level);if(r.memLevel&&(r.memLevel<e.Z_MIN_MEMLEVEL||r.memLevel>e.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+r.memLevel);if(r.strategy&&r.strategy!=e.Z_FILTERED&&r.strategy!=e.Z_HUFFMAN_ONLY&&r.strategy!=e.Z_RLE&&r.strategy!=e.Z_FIXED&&r.strategy!=e.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+r.strategy);if(r.dictionary&&!t.isBuffer(r.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new _.Zlib(n);var i=this;this._hadError=!1,this._binding.onerror=function(t,r){i._binding=null,i._hadError=!0;var n=new Error(t);n.errno=r,n.code=e.codes[r],i.emit("error",n)};var o=e.Z_DEFAULT_COMPRESSION;"number"==typeof r.level&&(o=r.level);var s=e.Z_DEFAULT_STRATEGY;"number"==typeof r.strategy&&(s=r.strategy),this._binding.init(r.windowBits||e.Z_DEFAULT_WINDOWBITS,o,r.memLevel||e.Z_DEFAULT_MEMLEVEL,s,r.dictionary),this._buffer=new t(this._chunkSize),this._offset=0,this._closed=!1,this._level=o,this._strategy=s,this.once("end",this.close)}var d=r(30),_=r(33),g=r(12),y=r(45).ok;_.Z_MIN_WINDOWBITS=8,_.Z_MAX_WINDOWBITS=15,_.Z_DEFAULT_WINDOWBITS=15,_.Z_MIN_CHUNK=64,_.Z_MAX_CHUNK=1/0,_.Z_DEFAULT_CHUNK=16384,_.Z_MIN_MEMLEVEL=1,_.Z_MAX_MEMLEVEL=9,_.Z_DEFAULT_MEMLEVEL=8,_.Z_MIN_LEVEL=-1,_.Z_MAX_LEVEL=9,_.Z_DEFAULT_LEVEL=_.Z_DEFAULT_COMPRESSION,Object.keys(_).forEach(function(t){t.match(/^Z/)&&(e[t]=_[t])}),e.codes={Z_OK:_.Z_OK,Z_STREAM_END:_.Z_STREAM_END,Z_NEED_DICT:_.Z_NEED_DICT,Z_ERRNO:_.Z_ERRNO,Z_STREAM_ERROR:_.Z_STREAM_ERROR,Z_DATA_ERROR:_.Z_DATA_ERROR,Z_MEM_ERROR:_.Z_MEM_ERROR,Z_BUF_ERROR:_.Z_BUF_ERROR,Z_VERSION_ERROR:_.Z_VERSION_ERROR},Object.keys(e.codes).forEach(function(t){e.codes[e.codes[t]]=t}),e.Deflate=s,e.Inflate=a,e.Gzip=u,e.Gunzip=h,e.DeflateRaw=c,e.InflateRaw=f,e.Unzip=l,e.createDeflate=function(t){return new s(t)},e.createInflate=function(t){return new a(t)},e.createDeflateRaw=function(t){return new c(t)},e.createInflateRaw=function(t){return new f(t)},e.createGzip=function(t){return new u(t)},e.createGunzip=function(t){return new h(t)},e.createUnzip=function(t){return new l(t)},e.deflate=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new s(e),t,r)},e.deflateSync=function(t,e){return o(new s(e),t)},e.gzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new u(e),t,r)},e.gzipSync=function(t,e){return o(new u(e),t)},e.deflateRaw=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new c(e),t,r)},e.deflateRawSync=function(t,e){return o(new c(e),t)},e.unzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new l(e),t,r)},e.unzipSync=function(t,e){return o(new l(e),t)},e.inflate=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new a(e),t,r)},e.inflateSync=function(t,e){return o(new a(e),t)},e.gunzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new h(e),t,r)},e.gunzipSync=function(t,e){return o(new h(e),t)},e.inflateRaw=function(t,e,r){return"function"==typeof e&&(r=e,e={}),i(new f(e),t,r)},e.inflateRawSync=function(t,e){return o(new f(e),t)},g.inherits(p,d),p.prototype.params=function(t,r,i){if(t<e.Z_MIN_LEVEL||t>e.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+t);if(r!=e.Z_FILTERED&&r!=e.Z_HUFFMAN_ONLY&&r!=e.Z_RLE&&r!=e.Z_FIXED&&r!=e.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==t||this._strategy!==r){var o=this;this.flush(_.Z_SYNC_FLUSH,function(){o._binding.params(t,r),o._hadError||(o._level=t,o._strategy=r,i&&i())})}else n.nextTick(i)},p.prototype.reset=function(){return this._binding.reset()},p.prototype._flush=function(e){this._transform(new t(0),"",e)},p.prototype.flush=function(e,r){var i=this._writableState;if(("function"==typeof e||void 0===e&&!r)&&(r=e,e=_.Z_FULL_FLUSH),i.ended)r&&n.nextTick(r);else if(i.ending)r&&this.once("end",r);else if(i.needDrain){var o=this;this.once("drain",function(){o.flush(r)})}else this._flushFlag=e,this.write(new t(0),"",r)},p.prototype.close=function(t){if(t&&n.nextTick(t),!this._closed){this._closed=!0,this._binding.close();var e=this;n.nextTick(function(){e.emit("close")})}},p.prototype._transform=function(e,r,n){var i,o=this._writableState,s=o.ending||o.ended,a=s&&(!e||o.length===e.length);if(null===!e&&!t.isBuffer(e))return n(new Error("invalid input"));a?i=_.Z_FINISH:(i=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||_.Z_NO_FLUSH));this._processChunk(e,i,n)},p.prototype._processChunk=function(e,r,n){function i(c,p){if(!u._hadError){var d=s-p;if(y(d>=0,"have should not go down"),d>0){var _=u._buffer.slice(u._offset,u._offset+d);u._offset+=d,h?u.push(_):(f.push(_),l+=_.length)}if((0===p||u._offset>=u._chunkSize)&&(s=u._chunkSize,u._offset=0,u._buffer=new t(u._chunkSize)),0===p){if(a+=o-c,o=c,!h)return!0;var g=u._binding.write(r,e,a,o,u._buffer,u._offset,u._chunkSize);return g.callback=i,void(g.buffer=e)}return!!h&&void n()}}var o=e&&e.length,s=this._chunkSize-this._offset,a=0,u=this,h="function"==typeof n;if(!h){var c,f=[],l=0;this.on("error",function(t){c=t});do var p=this._binding.writeSync(r,e,a,o,this._buffer,this._offset,s);while(!this._hadError&&i(p[0],p[1]));if(this._hadError)throw c;var d=t.concat(f,l);return this.close(),d}var _=this._binding.write(r,e,a,o,this._buffer,this._offset,s);_.buffer=e,_.callback=i},g.inherits(s,p),g.inherits(a,p),g.inherits(u,p),g.inherits(h,p),g.inherits(c,p),g.inherits(f,p),g.inherits(l,p)}).call(e,r(1).Buffer,r(6))},function(t,e,r){(function(t,n){function i(t){if(t<e.DEFLATE||t>e.UNZIP)throw new TypeError("Bad argument");this.mode=t,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function o(t,e){for(var r=0;r<t.length;r++)this[e+r]=t[r]}var s=r(34),a=r(35),u=r(36),h=r(41),c=r(44);for(var f in c)e[f]=c[f];e.NONE=0,e.DEFLATE=1,e.INFLATE=2,e.GZIP=3,e.GUNZIP=4,e.DEFLATERAW=5,e.INFLATERAW=6,e.UNZIP=7,i.prototype.init=function(t,r,n,i,o){switch(this.windowBits=t,this.level=r,this.memLevel=n,this.strategy=i,this.mode!==e.GZIP&&this.mode!==e.GUNZIP||(this.windowBits+=16),this.mode===e.UNZIP&&(this.windowBits+=32),this.mode!==e.DEFLATERAW&&this.mode!==e.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new a,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:var s=u.deflateInit2(this.strm,this.level,e.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:case e.UNZIP:var s=h.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}return s!==e.Z_OK?void this._error(s):(this.write_in_progress=!1,void(this.init_done=!0))},i.prototype.params=function(){throw new Error("deflateParams Not supported")},i.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===e.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},i.prototype.write=function(e,r,n,i,o,s,a){this._writeCheck(),this.write_in_progress=!0;var u=this;return t.nextTick(function(){u.write_in_progress=!1;var t=u._write(e,r,n,i,o,s,a);u.callback(t[0],t[1]),u.pending_close&&u.close()}),this},i.prototype.writeSync=function(t,e,r,n,i,o,s){return this._writeCheck(),this._write(t,e,r,n,i,o,s)},i.prototype._write=function(t,r,i,s,a,c,f){if(this.write_in_progress=!0,t!==e.Z_NO_FLUSH&&t!==e.Z_PARTIAL_FLUSH&&t!==e.Z_SYNC_FLUSH&&t!==e.Z_FULL_FLUSH&&t!==e.Z_FINISH&&t!==e.Z_BLOCK)throw new Error("Invalid flush value");null==r&&(r=new n(0),s=0,i=0),a._set?a.set=a._set:a.set=o;var l=this.strm;switch(l.avail_in=s,l.input=r,l.next_in=i,l.avail_out=f,l.output=a,l.next_out=c,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:var p=u.deflate(l,t);break;case e.UNZIP:case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:var p=h.inflate(l,t);break;default:throw new Error("Unknown mode "+this.mode)}return p!==e.Z_STREAM_END&&p!==e.Z_OK&&this._error(p),this.write_in_progress=!1,[l.avail_in,l.avail_out]},i.prototype.close=function(){return this.write_in_progress?void(this.pending_close=!0):(this.pending_close=!1,this.mode===e.DEFLATE||this.mode===e.GZIP||this.mode===e.DEFLATERAW?u.deflateEnd(this.strm):h.inflateEnd(this.strm),void(this.mode=e.NONE))},i.prototype.reset=function(){switch(this.mode){case e.DEFLATE:case e.DEFLATERAW:var t=u.deflateReset(this.strm);break;case e.INFLATE:case e.INFLATERAW:var t=h.inflateReset(this.strm)}t!==e.Z_OK&&this._error(t)},i.prototype._error=function(t){this.onerror(s[t]+": "+this.strm.msg,t),this.write_in_progress=!1,this.pending_close&&this.close()},e.Zlib=i}).call(e,r(6),r(1).Buffer)},function(t,e){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},function(t,e,r){"use strict";function n(t,e){return t.msg=z[e],e}function i(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(O.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function a(t,e){N._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function u(t,e){t.pending_buf[t.pending++]=e}function h(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function c(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,O.arraySet(e,t.input,t.next_in,i,r),1===t.state.wrap?t.adler=B(t.adler,e,i,r):2===t.state.wrap&&(t.adler=I(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function f(t,e){var r,n,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-ft?t.strstart-(t.w_size-ft):0,h=t.window,c=t.w_mask,f=t.prev,l=t.strstart+ct,p=h[o+s-1],d=h[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do if(r=e,h[r+s]===d&&h[r+s-1]===p&&h[r]===h[o]&&h[++r]===h[o+1]){o+=2,r++;do;while(h[++o]===h[++r]&&h[++o]===h[++r]&&h[++o]===h[++r]&&h[++o]===h[++r]&&h[++o]===h[++r]&&h[++o]===h[++r]&&h[++o]===h[++r]&&h[++o]===h[++r]&&o<l);if(n=ct-(l-o),o=l-ct,n>s){if(t.match_start=e,s=n,n>=a)break;p=h[o+s-1],d=h[o+s]}}while((e=f[e&c])>u&&0!==--i);return s<=t.lookahead?s:t.lookahead}function l(t){var e,r,n,i,o,s=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-ft)){O.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,r=t.hash_size,e=r;do n=t.head[--e],t.head[e]=n>=s?n-s:0;while(--r);r=s,e=r;do n=t.prev[--e],t.prev[e]=n>=s?n-s:0;while(--r);i+=s}if(0===t.strm.avail_in)break;if(r=c(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=ht)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+ht-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<ht)););}while(t.lookahead<ft&&0!==t.strm.avail_in)}function p(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(l(t),0===t.lookahead&&e===M)return wt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,a(t,!1),0===t.strm.avail_out))return wt;if(t.strstart-t.block_start>=t.w_size-ft&&(a(t,!1),0===t.strm.avail_out))return wt}return t.insert=0,e===D?(a(t,!0),0===t.strm.avail_out?kt:Et):t.strstart>t.block_start&&(a(t,!1),0===t.strm.avail_out)?wt:wt}function d(t,e){for(var r,n;;){if(t.lookahead<ft){if(l(t),t.lookahead<ft&&e===M)return wt;if(0===t.lookahead)break}if(r=0,t.lookahead>=ht&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-ft&&(t.match_length=f(t,r)),t.match_length>=ht)if(n=N._tr_tally(t,t.strstart-t.match_start,t.match_length-ht),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ht){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=N._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(a(t,!1),0===t.strm.avail_out))return wt}return t.insert=t.strstart<ht-1?t.strstart:ht-1,e===D?(a(t,!0),0===t.strm.avail_out?kt:Et):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?wt:bt}function _(t,e){for(var r,n,i;;){if(t.lookahead<ft){if(l(t),t.lookahead<ft&&e===M)return wt;if(0===t.lookahead)break}if(r=0,t.lookahead>=ht&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=ht-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-ft&&(t.match_length=f(t,r),t.match_length<=5&&(t.strategy===V||t.match_length===ht&&t.strstart-t.match_start>4096)&&(t.match_length=ht-1)),t.prev_length>=ht&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-ht,n=N._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ht),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=ht-1,t.strstart++,n&&(a(t,!1),0===t.strm.avail_out))return wt}else if(t.match_available){if(n=N._tr_tally(t,0,t.window[t.strstart-1]),n&&a(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return wt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=N._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<ht-1?t.strstart:ht-1,e===D?(a(t,!0),0===t.strm.avail_out?kt:Et):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?wt:bt}function g(t,e){for(var r,n,i,o,s=t.window;;){if(t.lookahead<=ct){if(l(t),t.lookahead<=ct&&e===M)return wt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=ht&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=t.strstart+ct;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);t.match_length=ct-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ht?(r=N._tr_tally(t,1,t.match_length-ht),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=N._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(a(t,!1),0===t.strm.avail_out))return wt}return t.insert=0,e===D?(a(t,!0),0===t.strm.avail_out?kt:Et):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?wt:bt}function y(t,e){for(var r;;){if(0===t.lookahead&&(l(t),0===t.lookahead)){if(e===M)return wt;break}if(t.match_length=0,r=N._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(a(t,!1),0===t.strm.avail_out))return wt}return t.insert=0,e===D?(a(t,!0),0===t.strm.avail_out?kt:Et):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?wt:bt}function v(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function m(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=R[t.level].max_lazy,t.good_match=R[t.level].good_length,t.nice_match=R[t.level].nice_length,t.max_chain_length=R[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ht-1,t.match_available=0,t.ins_h=0}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new O.Buf16(2*at),this.dyn_dtree=new O.Buf16(2*(2*ot+1)),this.bl_tree=new O.Buf16(2*(2*st+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new O.Buf16(ut+1),this.heap=new O.Buf16(2*it+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new O.Buf16(2*it+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=X,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?pt:vt,t.adler=2===e.wrap?0:1,e.last_flush=M,N._tr_init(e),U):n(t,Z)}function k(t){var e=b(t);return e===U&&m(t.state),e}function E(t,e){return t&&t.state?2!==t.state.wrap?Z:(t.state.gzhead=e,U):Z}function x(t,e,r,i,o,s){if(!t)return Z;var a=1;if(e===q&&(e=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),o<1||o>Q||r!==$||i<8||i>15||e<0||e>9||s<0||s>G)return n(t,Z);8===i&&(i=9);var u=new w;return t.state=u,u.strm=t,u.wrap=a,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,
u.hash_shift=~~((u.hash_bits+ht-1)/ht),u.window=new O.Buf8(2*u.w_size),u.head=new O.Buf16(u.hash_size),u.prev=new O.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new O.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=s,u.method=r,k(t)}function T(t,e){return x(t,e,$,tt,et,K)}function S(t,e){var r,a,c,f;if(!t||!t.state||e>P||e<0)return t?n(t,Z):Z;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===mt&&e!==D)return n(t,0===t.avail_out?W:Z);if(a.strm=t,r=a.last_flush,a.last_flush=e,a.status===pt)if(2===a.wrap)t.adler=0,u(a,31),u(a,139),u(a,8),a.gzhead?(u(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),u(a,255&a.gzhead.time),u(a,a.gzhead.time>>8&255),u(a,a.gzhead.time>>16&255),u(a,a.gzhead.time>>24&255),u(a,9===a.level?2:a.strategy>=Y||a.level<2?4:0),u(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(u(a,255&a.gzhead.extra.length),u(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=I(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=dt):(u(a,0),u(a,0),u(a,0),u(a,0),u(a,0),u(a,9===a.level?2:a.strategy>=Y||a.level<2?4:0),u(a,xt),a.status=vt);else{var l=$+(a.w_bits-8<<4)<<8,p=-1;p=a.strategy>=Y||a.level<2?0:a.level<6?1:6===a.level?2:3,l|=p<<6,0!==a.strstart&&(l|=lt),l+=31-l%31,a.status=vt,h(a,l),0!==a.strstart&&(h(a,t.adler>>>16),h(a,65535&t.adler)),t.adler=1}if(a.status===dt)if(a.gzhead.extra){for(c=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>c&&(t.adler=I(t.adler,a.pending_buf,a.pending-c,c)),s(t),c=a.pending,a.pending!==a.pending_buf_size));)u(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>c&&(t.adler=I(t.adler,a.pending_buf,a.pending-c,c)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=_t)}else a.status=_t;if(a.status===_t)if(a.gzhead.name){c=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>c&&(t.adler=I(t.adler,a.pending_buf,a.pending-c,c)),s(t),c=a.pending,a.pending===a.pending_buf_size)){f=1;break}f=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,u(a,f)}while(0!==f);a.gzhead.hcrc&&a.pending>c&&(t.adler=I(t.adler,a.pending_buf,a.pending-c,c)),0===f&&(a.gzindex=0,a.status=gt)}else a.status=gt;if(a.status===gt)if(a.gzhead.comment){c=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>c&&(t.adler=I(t.adler,a.pending_buf,a.pending-c,c)),s(t),c=a.pending,a.pending===a.pending_buf_size)){f=1;break}f=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,u(a,f)}while(0!==f);a.gzhead.hcrc&&a.pending>c&&(t.adler=I(t.adler,a.pending_buf,a.pending-c,c)),0===f&&(a.status=yt)}else a.status=yt;if(a.status===yt&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(t),a.pending+2<=a.pending_buf_size&&(u(a,255&t.adler),u(a,t.adler>>8&255),t.adler=0,a.status=vt)):a.status=vt),0!==a.pending){if(s(t),0===t.avail_out)return a.last_flush=-1,U}else if(0===t.avail_in&&i(e)<=i(r)&&e!==D)return n(t,W);if(a.status===mt&&0!==t.avail_in)return n(t,W);if(0!==t.avail_in||0!==a.lookahead||e!==M&&a.status!==mt){var d=a.strategy===Y?y(a,e):a.strategy===J?g(a,e):R[a.level].func(a,e);if(d!==kt&&d!==Et||(a.status=mt),d===wt||d===kt)return 0===t.avail_out&&(a.last_flush=-1),U;if(d===bt&&(e===F?N._tr_align(a):e!==P&&(N._tr_stored_block(a,0,0,!1),e===j&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(t),0===t.avail_out))return a.last_flush=-1,U}return e!==D?U:a.wrap<=0?C:(2===a.wrap?(u(a,255&t.adler),u(a,t.adler>>8&255),u(a,t.adler>>16&255),u(a,t.adler>>24&255),u(a,255&t.total_in),u(a,t.total_in>>8&255),u(a,t.total_in>>16&255),u(a,t.total_in>>24&255)):(h(a,t.adler>>>16),h(a,65535&t.adler)),s(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?U:C)}function A(t){var e;return t&&t.state?(e=t.state.status,e!==pt&&e!==dt&&e!==_t&&e!==gt&&e!==yt&&e!==vt&&e!==mt?n(t,Z):(t.state=null,e===vt?n(t,H):U)):Z}function L(t,e){var r,n,i,s,a,u,h,c,f=e.length;if(!t||!t.state)return Z;if(r=t.state,s=r.wrap,2===s||1===s&&r.status!==pt||r.lookahead)return Z;for(1===s&&(t.adler=B(t.adler,e,f,0)),r.wrap=0,f>=r.w_size&&(0===s&&(o(r.head),r.strstart=0,r.block_start=0,r.insert=0),c=new O.Buf8(r.w_size),O.arraySet(c,e,f-r.w_size,r.w_size,0),e=c,f=r.w_size),a=t.avail_in,u=t.next_in,h=t.input,t.avail_in=f,t.next_in=0,t.input=e,l(r);r.lookahead>=ht;){n=r.strstart,i=r.lookahead-(ht-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+ht-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++;while(--i);r.strstart=n,r.lookahead=ht-1,l(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=ht-1,r.match_available=0,t.next_in=u,t.input=h,t.avail_in=a,r.wrap=s,U}var R,O=r(37),N=r(38),B=r(39),I=r(40),z=r(34),M=0,F=1,j=3,D=4,P=5,U=0,C=1,Z=-2,H=-3,W=-5,q=-1,V=1,Y=2,J=3,G=4,K=0,X=2,$=8,Q=9,tt=15,et=8,rt=29,nt=256,it=nt+1+rt,ot=30,st=19,at=2*it+1,ut=15,ht=3,ct=258,ft=ct+ht+1,lt=32,pt=42,dt=69,_t=73,gt=91,yt=103,vt=113,mt=666,wt=1,bt=2,kt=3,Et=4,xt=3;R=[new v(0,0,0,0,p),new v(4,4,8,4,d),new v(4,5,16,8,d),new v(4,6,32,32,d),new v(4,4,16,16,_),new v(8,16,32,32,_),new v(8,16,128,128,_),new v(8,32,128,256,_),new v(32,128,258,1024,_),new v(32,258,258,4096,_)],e.deflateInit=T,e.deflateInit2=x,e.deflateReset=k,e.deflateResetKeep=b,e.deflateSetHeader=E,e.deflate=S,e.deflateEnd=A,e.deflateSetDictionary=L,e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)return void t.set(e.subarray(r,r+n),i);for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,s;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)o=t[e],s.set(o,i),i+=o.length;return s}},i={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(r)},function(t,e,r){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function s(t){return t<256?ut[t]:ut[256+(t>>>7)]}function a(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function u(t,e,r){t.bi_valid>G-r?(t.bi_buf|=e<<t.bi_valid&65535,a(t,t.bi_buf),t.bi_buf=e>>G-t.bi_valid,t.bi_valid+=r-G):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function h(t,e,r){u(t,r[2*e],r[2*e+1])}function c(t,e){var r=0;do r|=1&t,t>>>=1,r<<=1;while(--e>0);return r>>>1}function f(t){16===t.bi_valid?(a(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function l(t,e){var r,n,i,o,s,a,u=e.dyn_tree,h=e.max_code,c=e.stat_desc.static_tree,f=e.stat_desc.has_stree,l=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,_=0;for(o=0;o<=J;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<Y;r++)n=t.heap[r],o=u[2*u[2*n+1]+1]+1,o>d&&(o=d,_++),u[2*n+1]=o,n>h||(t.bl_count[o]++,s=0,n>=p&&(s=l[n-p]),a=u[2*n],t.opt_len+=a*(o+s),f&&(t.static_len+=a*(c[2*n+1]+s)));if(0!==_){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,_-=2}while(_>0);for(o=d;0!==o;o--)for(n=t.bl_count[o];0!==n;)i=t.heap[--r],i>h||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}function p(t,e,r){var n,i,o=new Array(J+1),s=0;for(n=1;n<=J;n++)o[n]=s=s+r[n-1]<<1;for(i=0;i<=e;i++){var a=t[2*i+1];0!==a&&(t[2*i]=c(o[a]++,a))}}function d(){var t,e,r,n,o,s=new Array(J+1);for(r=0,n=0;n<Z-1;n++)for(ct[n]=r,t=0;t<1<<et[n];t++)ht[r++]=n;for(ht[r-1]=n,o=0,n=0;n<16;n++)for(ft[n]=o,t=0;t<1<<rt[n];t++)ut[o++]=n;for(o>>=7;n<q;n++)for(ft[n]=o<<7,t=0;t<1<<rt[n]-7;t++)ut[256+o++]=n;for(e=0;e<=J;e++)s[e]=0;for(t=0;t<=143;)st[2*t+1]=8,t++,s[8]++;for(;t<=255;)st[2*t+1]=9,t++,s[9]++;for(;t<=279;)st[2*t+1]=7,t++,s[7]++;for(;t<=287;)st[2*t+1]=8,t++,s[8]++;for(p(st,W+1,s),t=0;t<q;t++)at[2*t+1]=5,at[2*t]=c(t,5);lt=new i(st,et,H+1,W,J),pt=new i(at,rt,0,q,J),dt=new i(new Array(0),nt,0,V,K)}function _(t){var e;for(e=0;e<W;e++)t.dyn_ltree[2*e]=0;for(e=0;e<q;e++)t.dyn_dtree[2*e]=0;for(e=0;e<V;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*X]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function g(t){t.bi_valid>8?a(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function y(t,e,r,n){g(t),n&&(a(t,r),a(t,~r)),B.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function v(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function m(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&v(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!v(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function w(t,e,r){var n,i,o,a,c=0;if(0!==t.last_lit)do n=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],i=t.pending_buf[t.l_buf+c],c++,0===n?h(t,i,e):(o=ht[i],h(t,o+H+1,e),a=et[o],0!==a&&(i-=ct[o],u(t,i,a)),n--,o=s(n),h(t,o,r),a=rt[o],0!==a&&(n-=ft[o],u(t,n,a)));while(c<t.last_lit);h(t,X,e)}function b(t,e){var r,n,i,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,u=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=Y,r=0;r<u;r++)0!==o[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)i=t.heap[++t.heap_len]=h<2?++h:0,o[2*i]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=s[2*i+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)m(t,o,r);i=u;do r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],m(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,m(t,o,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],l(t,e),p(o,h,t.bl_count)}function k(t,e,r){var n,i,o=-1,s=e[1],a=0,u=7,h=4;for(0===s&&(u=138,h=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=e[2*(n+1)+1],++a<u&&i===s||(a<h?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*$]++):a<=10?t.bl_tree[2*Q]++:t.bl_tree[2*tt]++,a=0,o=i,0===s?(u=138,h=3):i===s?(u=6,h=3):(u=7,h=4))}function E(t,e,r){var n,i,o=-1,s=e[1],a=0,c=7,f=4;for(0===s&&(c=138,f=3),n=0;n<=r;n++)if(i=s,s=e[2*(n+1)+1],!(++a<c&&i===s)){if(a<f){do h(t,i,t.bl_tree);while(0!==--a)}else 0!==i?(i!==o&&(h(t,i,t.bl_tree),a--),h(t,$,t.bl_tree),u(t,a-3,2)):a<=10?(h(t,Q,t.bl_tree),u(t,a-3,3)):(h(t,tt,t.bl_tree),u(t,a-11,7));a=0,o=i,0===s?(c=138,f=3):i===s?(c=6,f=3):(c=7,f=4)}}function x(t){var e;for(k(t,t.dyn_ltree,t.l_desc.max_code),k(t,t.dyn_dtree,t.d_desc.max_code),b(t,t.bl_desc),e=V-1;e>=3&&0===t.bl_tree[2*it[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function T(t,e,r,n){var i;for(u(t,e-257,5),u(t,r-1,5),u(t,n-4,4),i=0;i<n;i++)u(t,t.bl_tree[2*it[i]+1],3);E(t,t.dyn_ltree,e-1),E(t,t.dyn_dtree,r-1)}function S(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return z;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return M;for(e=32;e<H;e++)if(0!==t.dyn_ltree[2*e])return M;return z}function A(t){_t||(d(),_t=!0),t.l_desc=new o(t.dyn_ltree,lt),t.d_desc=new o(t.dyn_dtree,pt),t.bl_desc=new o(t.bl_tree,dt),t.bi_buf=0,t.bi_valid=0,_(t)}function L(t,e,r,n){u(t,(j<<1)+(n?1:0),3),y(t,e,r,!0)}function R(t){u(t,D<<1,3),h(t,X,st),f(t)}function O(t,e,r,n){var i,o,s=0;t.level>0?(t.strm.data_type===F&&(t.strm.data_type=S(t)),b(t,t.l_desc),b(t,t.d_desc),s=x(t),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&e!==-1?L(t,e,r,n):t.strategy===I||o===i?(u(t,(D<<1)+(n?1:0),3),w(t,st,at)):(u(t,(P<<1)+(n?1:0),3),T(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),w(t,t.dyn_ltree,t.dyn_dtree)),_(t),n&&g(t)}function N(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(ht[r]+H+1)]++,t.dyn_dtree[2*s(e)]++),t.last_lit===t.lit_bufsize-1}var B=r(37),I=4,z=0,M=1,F=2,j=0,D=1,P=2,U=3,C=258,Z=29,H=256,W=H+1+Z,q=30,V=19,Y=2*W+1,J=15,G=16,K=7,X=256,$=16,Q=17,tt=18,et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],rt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],it=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ot=512,st=new Array(2*(W+2));n(st);var at=new Array(2*q);n(at);var ut=new Array(ot);n(ut);var ht=new Array(C-U+1);n(ht);var ct=new Array(Z);n(ct);var ft=new Array(q);n(ft);var lt,pt,dt,_t=!1;e._tr_init=A,e._tr_stored_block=L,e._tr_flush_block=O,e._tr_tally=N,e._tr_align=R},function(t,e){"use strict";function r(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,s=0;0!==r;){s=r>2e3?2e3:r,r-=s;do i=i+e[n++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}t.exports=r},function(t,e){"use strict";function r(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}function n(t,e,r,n){var o=i,s=n+r;t^=-1;for(var a=n;a<s;a++)t=t>>>8^o[255&(t^e[a])];return t^-1}var i=r();t.exports=n},function(t,e,r){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=j,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new v.Buf32(_t),e.distcode=e.distdyn=new v.Buf32(gt),e.sane=1,e.back=-1,R):B}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):B}function a(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15)?B:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,s(t))):B}function u(t,e){var r,n;return t?(n=new i,t.state=n,n.window=null,r=a(t,e),r!==R&&(t.state=null),r):B}function h(t){return u(t,vt)}function c(t){if(mt){var e;for(g=new v.Buf32(512),y=new v.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(k(x,t.lens,0,288,g,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;k(T,t.lens,0,32,y,0,t.work,{bits:5}),mt=!1}t.lencode=g,t.lenbits=9,t.distcode=y,t.distbits=5}function f(t,e,r,n){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new v.Buf8(o.wsize)),n>=o.wsize?(v.arraySet(o.window,e,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),v.arraySet(o.window,e,r-n,i,o.wnext),n-=i,n?(v.arraySet(o.window,e,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function l(t,e){var r,i,o,s,a,u,h,l,p,d,_,g,y,_t,gt,yt,vt,mt,wt,bt,kt,Et,xt,Tt,St=0,At=new v.Buf8(4),Lt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return B;r=t.state,r.mode===J&&(r.mode=G),a=t.next_out,o=t.output,h=t.avail_out,s=t.next_in,i=t.input,u=t.avail_in,l=r.hold,p=r.bits,d=u,_=h,Et=R;t:for(;;)switch(r.mode){case j:if(0===r.wrap){r.mode=G;break}for(;p<16;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}if(2&r.wrap&&35615===l){r.check=0,At[0]=255&l,At[1]=l>>>8&255,r.check=w(r.check,At,2,0),l=0,p=0,r.mode=D;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",r.mode=lt;break}if((15&l)!==F){t.msg="unknown compression method",r.mode=lt;break}if(l>>>=4,p-=4,kt=(15&l)+8,0===r.wbits)r.wbits=kt;else if(kt>r.wbits){t.msg="invalid window size",r.mode=lt;break}r.dmax=1<<kt,t.adler=r.check=1,r.mode=512&l?V:J,l=0,p=0;break;case D:for(;p<16;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}if(r.flags=l,(255&r.flags)!==F){t.msg="unknown compression method",r.mode=lt;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=lt;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&(At[0]=255&l,At[1]=l>>>8&255,r.check=w(r.check,At,2,0)),l=0,p=0,r.mode=P;case P:for(;p<32;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}r.head&&(r.head.time=l),512&r.flags&&(At[0]=255&l,At[1]=l>>>8&255,At[2]=l>>>16&255,At[3]=l>>>24&255,r.check=w(r.check,At,4,0)),l=0,p=0,r.mode=U;case U:for(;p<16;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&(At[0]=255&l,At[1]=l>>>8&255,r.check=w(r.check,At,2,0)),l=0,p=0,r.mode=C;case C:if(1024&r.flags){for(;p<16;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&(At[0]=255&l,At[1]=l>>>8&255,r.check=w(r.check,At,2,0)),l=0,p=0}else r.head&&(r.head.extra=null);r.mode=Z;case Z:if(1024&r.flags&&(g=r.length,g>u&&(g=u),g&&(r.head&&(kt=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),v.arraySet(r.head.extra,i,s,g,kt)),512&r.flags&&(r.check=w(r.check,i,g,s)),u-=g,s+=g,r.length-=g),r.length))break t;r.length=0,r.mode=H;case H:if(2048&r.flags){if(0===u)break t;g=0;do kt=i[s+g++],r.head&&kt&&r.length<65536&&(r.head.name+=String.fromCharCode(kt));while(kt&&g<u);if(512&r.flags&&(r.check=w(r.check,i,g,s)),u-=g,s+=g,kt)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=W;case W:if(4096&r.flags){if(0===u)break t;g=0;do kt=i[s+g++],r.head&&kt&&r.length<65536&&(r.head.comment+=String.fromCharCode(kt));while(kt&&g<u);if(512&r.flags&&(r.check=w(r.check,i,g,s)),u-=g,s+=g,kt)break t}else r.head&&(r.head.comment=null);r.mode=q;case q:if(512&r.flags){for(;p<16;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}if(l!==(65535&r.check)){t.msg="header crc mismatch",r.mode=lt;break}l=0,p=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=J;break;case V:for(;p<32;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}t.adler=r.check=n(l),l=0,p=0,r.mode=Y;case Y:if(0===r.havedict)return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=u,r.hold=l,r.bits=p,N;t.adler=r.check=1,r.mode=J;case J:if(e===A||e===L)break t;case G:if(r.last){l>>>=7&p,p-=7&p,r.mode=ht;break}for(;p<3;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}switch(r.last=1&l,l>>>=1,p-=1,3&l){case 0:r.mode=K;break;case 1:if(c(r),r.mode=rt,e===L){l>>>=2,p-=2;break t}break;case 2:r.mode=Q;break;case 3:t.msg="invalid block type",r.mode=lt}l>>>=2,p-=2;break;case K:for(l>>>=7&p,p-=7&p;p<32;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}if((65535&l)!==(l>>>16^65535)){t.msg="invalid stored block lengths",r.mode=lt;break}if(r.length=65535&l,l=0,p=0,r.mode=X,e===L)break t;case X:r.mode=$;case $:if(g=r.length){if(g>u&&(g=u),g>h&&(g=h),0===g)break t;v.arraySet(o,i,s,g,a),u-=g,s+=g,h-=g,a+=g,r.length-=g;break}r.mode=J;break;case Q:for(;p<14;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}if(r.nlen=(31&l)+257,l>>>=5,p-=5,r.ndist=(31&l)+1,l>>>=5,p-=5,r.ncode=(15&l)+4,l>>>=4,p-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=lt;break}r.have=0,r.mode=tt;case tt:for(;r.have<r.ncode;){for(;p<3;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}r.lens[Lt[r.have++]]=7&l,l>>>=3,p-=3}for(;r.have<19;)r.lens[Lt[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,xt={bits:r.lenbits},Et=k(E,r.lens,0,19,r.lencode,0,r.work,xt),r.lenbits=xt.bits,Et){t.msg="invalid code lengths set",r.mode=lt;break}r.have=0,r.mode=et;case et:for(;r.have<r.nlen+r.ndist;){for(;St=r.lencode[l&(1<<r.lenbits)-1],gt=St>>>24,yt=St>>>16&255,vt=65535&St,!(gt<=p);){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}if(vt<16)l>>>=gt,p-=gt,r.lens[r.have++]=vt;else{if(16===vt){for(Tt=gt+2;p<Tt;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}if(l>>>=gt,p-=gt,0===r.have){t.msg="invalid bit length repeat",r.mode=lt;break}kt=r.lens[r.have-1],g=3+(3&l),l>>>=2,p-=2}else if(17===vt){for(Tt=gt+3;p<Tt;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}l>>>=gt,p-=gt,kt=0,g=3+(7&l),l>>>=3,p-=3}else{for(Tt=gt+7;p<Tt;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}l>>>=gt,p-=gt,kt=0,g=11+(127&l),l>>>=7,p-=7}if(r.have+g>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=lt;break}for(;g--;)r.lens[r.have++]=kt}}if(r.mode===lt)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=lt;break}if(r.lenbits=9,xt={bits:r.lenbits},Et=k(x,r.lens,0,r.nlen,r.lencode,0,r.work,xt),r.lenbits=xt.bits,Et){t.msg="invalid literal/lengths set",r.mode=lt;break}if(r.distbits=6,r.distcode=r.distdyn,xt={bits:r.distbits},Et=k(T,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,xt),r.distbits=xt.bits,Et){t.msg="invalid distances set",r.mode=lt;break}if(r.mode=rt,e===L)break t;case rt:r.mode=nt;case nt:if(u>=6&&h>=258){t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=u,r.hold=l,r.bits=p,b(t,_),a=t.next_out,o=t.output,h=t.avail_out,s=t.next_in,i=t.input,u=t.avail_in,l=r.hold,p=r.bits,r.mode===J&&(r.back=-1);break}for(r.back=0;St=r.lencode[l&(1<<r.lenbits)-1],gt=St>>>24,yt=St>>>16&255,vt=65535&St,!(gt<=p);){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}if(yt&&0===(240&yt)){for(mt=gt,wt=yt,bt=vt;St=r.lencode[bt+((l&(1<<mt+wt)-1)>>mt)],gt=St>>>24,yt=St>>>16&255,vt=65535&St,!(mt+gt<=p);){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}l>>>=mt,p-=mt,r.back+=mt}if(l>>>=gt,p-=gt,r.back+=gt,r.length=vt,0===yt){r.mode=ut;break}if(32&yt){r.back=-1,r.mode=J;break}if(64&yt){t.msg="invalid literal/length code",r.mode=lt;break}r.extra=15&yt,r.mode=it;case it:if(r.extra){for(Tt=r.extra;p<Tt;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,p-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ot;case ot:for(;St=r.distcode[l&(1<<r.distbits)-1],gt=St>>>24,yt=St>>>16&255,vt=65535&St,!(gt<=p);){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}if(0===(240&yt)){for(mt=gt,wt=yt,bt=vt;St=r.distcode[bt+((l&(1<<mt+wt)-1)>>mt)],gt=St>>>24,yt=St>>>16&255,vt=65535&St,!(mt+gt<=p);){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}l>>>=mt,p-=mt,r.back+=mt}if(l>>>=gt,p-=gt,r.back+=gt,64&yt){t.msg="invalid distance code",r.mode=lt;break}r.offset=vt,r.extra=15&yt,r.mode=st;case st:if(r.extra){for(Tt=r.extra;p<Tt;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,p-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=lt;break}r.mode=at;case at:if(0===h)break t;if(g=_-h,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=lt;break}g>r.wnext?(g-=r.wnext,y=r.wsize-g):y=r.wnext-g,g>r.length&&(g=r.length),_t=r.window}else _t=o,y=a-r.offset,g=r.length;g>h&&(g=h),h-=g,r.length-=g;do o[a++]=_t[y++];while(--g);0===r.length&&(r.mode=nt);break;case ut:if(0===h)break t;o[a++]=r.length,h--,r.mode=nt;break;case ht:if(r.wrap){for(;p<32;){if(0===u)break t;u--,l|=i[s++]<<p,p+=8}if(_-=h,t.total_out+=_,r.total+=_,_&&(t.adler=r.check=r.flags?w(r.check,o,_,a-_):m(r.check,o,_,a-_)),_=h,(r.flags?l:n(l))!==r.check){t.msg="incorrect data check",r.mode=lt;break}l=0,p=0}r.mode=ct;case ct:if(r.wrap&&r.flags){for(;p<32;){if(0===u)break t;u--,l+=i[s++]<<p,p+=8}if(l!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=lt;break}l=0,p=0}r.mode=ft;case ft:Et=O;break t;case lt:Et=I;break t;case pt:return z;case dt:default:return B}return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=u,r.hold=l,r.bits=p,(r.wsize||_!==t.avail_out&&r.mode<lt&&(r.mode<ht||e!==S))&&f(t,t.output,t.next_out,_-t.avail_out)?(r.mode=pt,z):(d-=t.avail_in,_-=t.avail_out,t.total_in+=d,t.total_out+=_,r.total+=_,r.wrap&&_&&(t.adler=r.check=r.flags?w(r.check,o,_,t.next_out-_):m(r.check,o,_,t.next_out-_)),t.data_type=r.bits+(r.last?64:0)+(r.mode===J?128:0)+(r.mode===rt||r.mode===X?256:0),(0===d&&0===_||e===S)&&Et===R&&(Et=M),Et)}function p(t){if(!t||!t.state)return B;var e=t.state;return e.window&&(e.window=null),t.state=null,R}function d(t,e){var r;return t&&t.state?(r=t.state,0===(2&r.wrap)?B:(r.head=e,e.done=!1,R)):B}function _(t,e){var r,n,i,o=e.length;return t&&t.state?(r=t.state,0!==r.wrap&&r.mode!==Y?B:r.mode===Y&&(n=1,n=m(n,e,o,0),n!==r.check)?I:(i=f(t,e,o,o))?(r.mode=pt,z):(r.havedict=1,R)):B}var g,y,v=r(37),m=r(39),w=r(40),b=r(42),k=r(43),E=0,x=1,T=2,S=4,A=5,L=6,R=0,O=1,N=2,B=-2,I=-3,z=-4,M=-5,F=8,j=1,D=2,P=3,U=4,C=5,Z=6,H=7,W=8,q=9,V=10,Y=11,J=12,G=13,K=14,X=15,$=16,Q=17,tt=18,et=19,rt=20,nt=21,it=22,ot=23,st=24,at=25,ut=26,ht=27,ct=28,ft=29,lt=30,pt=31,dt=32,_t=852,gt=592,yt=15,vt=yt,mt=!0;e.inflateReset=s,e.inflateReset2=a,e.inflateResetKeep=o,e.inflateInit=h,e.inflateInit2=u,e.inflate=l,e.inflateEnd=p,e.inflateGetHeader=d,e.inflateSetDictionary=_,e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e){"use strict";var r=30,n=12;t.exports=function(t,e){var i,o,s,a,u,h,c,f,l,p,d,_,g,y,v,m,w,b,k,E,x,T,S,A,L;i=t.state,o=t.next_in,A=t.input,s=o+(t.avail_in-5),a=t.next_out,L=t.output,u=a-(e-t.avail_out),h=a+(t.avail_out-257),c=i.dmax,f=i.wsize,l=i.whave,p=i.wnext,d=i.window,_=i.hold,g=i.bits,y=i.lencode,v=i.distcode,m=(1<<i.lenbits)-1,w=(1<<i.distbits)-1;t:do{g<15&&(_+=A[o++]<<g,g+=8,_+=A[o++]<<g,g+=8),b=y[_&m];e:for(;;){if(k=b>>>24,_>>>=k,g-=k,k=b>>>16&255,0===k)L[a++]=65535&b;else{if(!(16&k)){if(0===(64&k)){b=y[(65535&b)+(_&(1<<k)-1)];continue e}if(32&k){i.mode=n;break t}t.msg="invalid literal/length code",i.mode=r;break t}E=65535&b,k&=15,k&&(g<k&&(_+=A[o++]<<g,g+=8),E+=_&(1<<k)-1,_>>>=k,g-=k),g<15&&(_+=A[o++]<<g,g+=8,_+=A[o++]<<g,g+=8),b=v[_&w];r:for(;;){if(k=b>>>24,_>>>=k,g-=k,k=b>>>16&255,!(16&k)){if(0===(64&k)){b=v[(65535&b)+(_&(1<<k)-1)];continue r}t.msg="invalid distance code",i.mode=r;break t}if(x=65535&b,k&=15,g<k&&(_+=A[o++]<<g,g+=8,g<k&&(_+=A[o++]<<g,g+=8)),x+=_&(1<<k)-1,x>c){t.msg="invalid distance too far back",i.mode=r;break t}if(_>>>=k,g-=k,k=a-u,x>k){if(k=x-k,k>l&&i.sane){t.msg="invalid distance too far back",i.mode=r;break t}if(T=0,S=d,0===p){if(T+=f-k,k<E){E-=k;do L[a++]=d[T++];while(--k);T=a-x,S=L}}else if(p<k){if(T+=f+p-k,k-=p,k<E){E-=k;do L[a++]=d[T++];while(--k);if(T=0,p<E){k=p,E-=k;do L[a++]=d[T++];while(--k);T=a-x,S=L}}}else if(T+=p-k,k<E){E-=k;do L[a++]=d[T++];while(--k);T=a-x,S=L}for(;E>2;)L[a++]=S[T++],L[a++]=S[T++],L[a++]=S[T++],E-=3;E&&(L[a++]=S[T++],E>1&&(L[a++]=S[T++]))}else{T=a-x;do L[a++]=L[T++],L[a++]=L[T++],L[a++]=L[T++],E-=3;while(E>2);E&&(L[a++]=L[T++],E>1&&(L[a++]=L[T++]))}break}}break}}while(o<s&&a<h);E=g>>3,o-=E,g-=E<<3,_&=(1<<g)-1,t.next_in=o,t.next_out=a,t.avail_in=o<s?5+(s-o):5-(o-s),t.avail_out=a<h?257+(h-a):257-(a-h),i.hold=_,i.bits=g}},function(t,e,r){"use strict";var n=r(37),i=15,o=852,s=592,a=0,u=1,h=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,r,d,_,g,y,v){var m,w,b,k,E,x,T,S,A,L=v.bits,R=0,O=0,N=0,B=0,I=0,z=0,M=0,F=0,j=0,D=0,P=null,U=0,C=new n.Buf16(i+1),Z=new n.Buf16(i+1),H=null,W=0;for(R=0;R<=i;R++)C[R]=0;for(O=0;O<d;O++)C[e[r+O]]++;for(I=L,B=i;B>=1&&0===C[B];B--);if(I>B&&(I=B),0===B)return _[g++]=20971520,_[g++]=20971520,v.bits=1,0;for(N=1;N<B&&0===C[N];N++);for(I<N&&(I=N),F=1,R=1;R<=i;R++)if(F<<=1,F-=C[R],F<0)return-1;if(F>0&&(t===a||1!==B))return-1;for(Z[1]=0,R=1;R<i;R++)Z[R+1]=Z[R]+C[R];for(O=0;O<d;O++)0!==e[r+O]&&(y[Z[e[r+O]]++]=O);if(t===a?(P=H=y,x=19):t===u?(P=c,U-=257,H=f,W-=257,x=256):(P=l,H=p,x=-1),D=0,O=0,R=N,E=g,z=I,M=0,b=-1,j=1<<I,k=j-1,t===u&&j>o||t===h&&j>s)return 1;for(var q=0;;){q++,T=R-M,y[O]<x?(S=0,A=y[O]):y[O]>x?(S=H[W+y[O]],A=P[U+y[O]]):(S=96,A=0),m=1<<R-M,w=1<<z,N=w;do w-=m,_[E+(D>>M)+w]=T<<24|S<<16|A|0;while(0!==w);for(m=1<<R-1;D&m;)m>>=1;if(0!==m?(D&=m-1,D+=m):D=0,O++,0===--C[R]){if(R===B)break;R=e[r+y[O]]}if(R>I&&(D&k)!==b){for(0===M&&(M=I),E+=N,z=R-M,F=1<<z;z+M<B&&(F-=C[z+M],!(F<=0));)z++,F<<=1;if(j+=1<<z,t===u&&j>o||t===h&&j>s)return 1;b=D&k,_[b]=I<<24|z<<16|E-g|0}}return 0!==D&&(_[E+D]=R-M<<24|64<<16|0),v.bits=I,0}},function(t,e){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,r){(function(e){"use strict";function n(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function o(t){return Object.prototype.toString.call(t)}function s(t){return!i(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function a(t){if(w.isFunction(t)){if(E)return t.name;var e=t.toString(),r=e.match(T);return r&&r[1]}}function u(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function h(t){if(E||!w.isFunction(t))return w.inspect(t);var e=a(t),r=e?": "+e:"";return"[Function"+r+"]"}function c(t){return u(h(t.actual),128)+" "+t.operator+" "+u(h(t.expected),128)}function f(t,e,r,n,i){throw new x.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function l(t,e){t||f(t,!0,e,"==",x.ok)}function p(t,e,r,a){if(t===e)return!0;if(i(t)&&i(e))return 0===n(t,e);if(w.isDate(t)&&w.isDate(e))return t.getTime()===e.getTime();if(w.isRegExp(t)&&w.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(s(t)&&s(e)&&o(t)===o(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===n(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;a=a||{actual:[],expected:[]};var u=a.actual.indexOf(t);return u!==-1&&u===a.expected.indexOf(e)||(a.actual.push(t),a.expected.push(e),_(t,e,r,a))}return r?t===e:t==e}function d(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function _(t,e,r,n){if(null===t||void 0===t||null===e||void 0===e)return!1;if(w.isPrimitive(t)||w.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=d(t),o=d(e);if(i&&!o||!i&&o)return!1;if(i)return t=k.call(t),e=k.call(e),p(t,e,r);var s,a,u=S(t),h=S(e);if(u.length!==h.length)return!1;for(u.sort(),h.sort(),a=u.length-1;a>=0;a--)if(u[a]!==h[a])return!1;for(a=u.length-1;a>=0;a--)if(s=u[a],!p(t[s],e[s],r,n))return!1;return!0}function g(t,e,r){p(t,e,!0)&&f(t,e,r,"notDeepStrictEqual",g)}function y(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&e.call({},t)===!0}function v(t){var e;try{t()}catch(t){e=t}return e}function m(t,e,r,n){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=v(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),
t&&!i&&f(i,r,"Missing expected exception"+n);var o="string"==typeof n,s=!t&&w.isError(i),a=!t&&i&&!r;if((s&&o&&y(i,r)||a)&&f(i,r,"Got unwanted exception"+n),t&&i&&r&&!y(i,r)||!t&&i)throw i}var w=r(12),b=Object.prototype.hasOwnProperty,k=Array.prototype.slice,E=function(){return"foo"===function(){}.name}(),x=t.exports=l,T=/\s*function\s+([^\(\s]*)\s*/;x.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var e=t.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=a(e),o=n.indexOf("\n"+i);if(o>=0){var s=n.indexOf("\n",o+1);n=n.substring(s+1)}this.stack=n}}},w.inherits(x.AssertionError,Error),x.fail=f,x.ok=l,x.equal=function(t,e,r){t!=e&&f(t,e,r,"==",x.equal)},x.notEqual=function(t,e,r){t==e&&f(t,e,r,"!=",x.notEqual)},x.deepEqual=function(t,e,r){p(t,e,!1)||f(t,e,r,"deepEqual",x.deepEqual)},x.deepStrictEqual=function(t,e,r){p(t,e,!0)||f(t,e,r,"deepStrictEqual",x.deepStrictEqual)},x.notDeepEqual=function(t,e,r){p(t,e,!1)&&f(t,e,r,"notDeepEqual",x.notDeepEqual)},x.notDeepStrictEqual=g,x.strictEqual=function(t,e,r){t!==e&&f(t,e,r,"===",x.strictEqual)},x.notStrictEqual=function(t,e,r){t===e&&f(t,e,r,"!==",x.notStrictEqual)},x.throws=function(t,e,r){m(!0,t,e,r)},x.doesNotThrow=function(t,e,r){m(!1,t,e,r)},x.ifError=function(t){if(t)throw t};var S=Object.keys||function(t){var e=[];for(var r in t)b.call(t,r)&&e.push(r);return e}}).call(e,function(){return this}())},function(t,e,r){(function(e,n){"use strict";function i(t,e){e=e||{};var r=t.protocol;if(!r)throw new Error("missing protocol name");if(void 0!==t.namespace)e.namespace=t.namespace;else{var n=/^(.*)\.[^.]+$/.exec(r);n&&(e.namespace=n[1])}r=A.qualify(r,e.namespace),t.types&&t.types.forEach(function(t){A.createType(t,e)});var i={};return t.messages&&Object.keys(t.messages).forEach(function(r){i[r]=new l(r,t.messages[r],e)}),new o(r,i,e.registry||{})}function o(t,e,r,n){return void 0===r?i(t,e):(this._name=t,this._messages=e,this._types=r,this._handlers=n||{},void(this._hs=L.getHash(this.getSchema()).toString("binary")))}function s(t,e){e=e||{},R.EventEmitter.call(this),this._ptcl=t,this._strict=!!e.strictErrors,this._endWritable=!!L.getOption(e,"endWritable",!0),this._timeout=L.getOption(e,"timeout",1e4),this._prefix=x(e.scope),this._cache=e.cache||{};var r,n=e.serverFingerprint;n&&(r=this._cache[n]),r||(n=t.getFingerprint(),r=this._cache[n]=new d(t,t,n)),this._adapter=r,this._registry=new p(this,C),this._destroyed=!1,this._interrupted=!1,this.once("_eot",function(t){this.emit("eot",t)})}function a(t,e,r){s.call(this,t,r),this._writableFactory=e,r&&r.noPing||this.emitMessage("",{},function(t){t&&this.emit("error",t)})}function u(t,r,i,o){function a(t){if(!p._destroyed){l=p._createHandshakeRequest(p._adapter,!t);var r=[P.toBuffer(l),new e([0,0])];p._writable.write({id:p._prefix,payload:r})}}function u(t){if(!p._matchesPrefix(t.id))return void I("discarding unscoped response %s (still connecting)",t.id);var r=e.concat(t.payload);try{var n=w(U,r).head;n.serverHash&&(p._adapter=p._getAdapter(n))}catch(t){return p.destroy(!0),void p.emit("error",b("handshake error (this can happen if the underlying transport is shared by multiple emitters or listeners using the same scope)",t))}p.emit("handshake",l,n),"NONE"===n.match?a(!0):(I("successfully connected"),p._readable.removeListener("data",u).on("data",h),p._connected=!0,p.emit("_connected"),l=null)}function h(t){var r=t.id;if(!p._matchesPrefix(r))return void I("discarding unscoped request %s",r);var i=p._registry.get(r);i&&n.nextTick(function(){I("received request %s",r),i(null,e.concat(t.payload),p._adapter)})}function c(){p.destroy(!0)}function f(){p.destroy()}s.call(this,t,o),this._readable=r,this._writable=i,this._connected=!(!o||!o.noPing),this._readable.on("end",c),this._writable.on("finish",f),this.once("eot",function(){I("emitter eot"),this._writable.removeListener("finish",f),this._endWritable&&this._writable.end(),this._readable.removeListener("data",u).removeListener("data",h).removeListener("end",c)});var l,p=this;this._connected?this._readable.on("data",h):(this._readable.on("data",u),n.nextTick(a))}function h(t,e){e=e||{},R.EventEmitter.call(this),this._ptcl=t,this._strict=!!e.strictErrors,this._endWritable=!!L.getOption(e,"endWritable",!0),this._prefix=x(e.scope),this._cache=e.cache||{};var r=this._ptcl.getFingerprint();this._cache[r]||(this._cache[r]=new d(this._ptcl,this._ptcl,r)),this._adapter=null,this._hook=null,this._pending=0,this._destroyed=!1,this._interrupted=!1,this.once("_eot",function(t){this.emit("eot",t)})}function c(t,r,i){function o(t){function r(t){if(!c._writable)return void c.once("_writable",function(){r(t)});var e=c._createHandshakeResponse(o,a);c.emit("handshake",a,e);var i=[U.toBuffer(e),t];c._writable.write({id:n,payload:i}),c._endWritable&&c._writable.end()}var n=t.id,i=e.concat(t.payload),o=null;try{var s=w(P,i),a=s.head,u=c._getAdapter(a)}catch(t){o=b("invalid handshake request",t)}o?r(E(o)):c._receive(s.tail,u,r)}function s(){c.destroy()}function a(){u&&u.removeListener("data",o).removeListener("end",s),c.destroy(!0)}h.call(this,t,i);var u,c=this;n.nextTick(function(){u=r.call(this,function(t,e){return t?(c.emit("error",t),void a()):(c._writable=e.on("finish",a),void c.emit("_writable"))}).on("data",o).on("end",s)})}function f(t,r,n,i){function o(t){function r(t){var e=c._createHandshakeResponse(i,h);c.emit("handshake",h,e);var r=[U.toBuffer(e),t];c._writable.write({id:n,payload:r})}var n=t.id;if(c._matchesPrefix(n)){var i,a=e.concat(t.payload);try{var u=w(P,a),h=u.head;c._adapter=c._getAdapter(h)}catch(t){i=b("invalid handshake request",t)}i?r(E(i)):(c._readable.removeListener("data",o).on("data",s),c._receive(u.tail,c._adapter,r))}}function s(t){var r=t.id;if(c._matchesPrefix(r)){var n=e.concat(t.payload);c._receive(n,c._adapter,function(t,e){e||c._writable.write({id:r,payload:[t]})})}}function a(){c.destroy()}function u(){c.destroy(!0)}h.call(this,t,i),this._adapter=void 0,this._writable=n.on("finish",u),this._readable=r.on("data",o).on("end",a),this.once("eot",function(){this._writable.removeListener("finish",u),this._endWritable&&this._writable.end(),this._readable.removeListener("data",o).removeListener("data",s).removeListener("end",a)});var c=this}function l(t,e,r){if(r=r||{},!A.isValidName(t))throw new Error(z("invalid message name: %s",t));this._name=t;var n=z("org.apache.avro.ipc.%sRequest",t);if(this._requestType=A.createType({name:n,type:"record",namespace:r.namespace||"",fields:e.request},r),delete r.registry[n],!e.response)throw new Error("missing response");this._responseType=A.createType(e.response,r);var i=e.errors||[];if(i.unshift("string"),this._errorType=A.createType(i,r),this._oneWay=!!e["one-way"],this._oneWay&&("null"!==this._responseType.getTypeName()||i.length>1))throw new Error("unapplicable one-way parameter")}function p(t,e){this._ctx=t,this._mask=-1>>>(0|e),this._id=0,this._n=0,this._cbs={}}function d(t,e,r){this._clientPtcl=t,this._serverPtcl=e,this._fingerprint=r,this._rsvs=t.equals(e)?null:this._createResolvers()}function _(){O.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._buf=new e(0),this._bufs=[],this.on("finish",function(){this.push(null)})}function g(){O.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}function y(){O.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._frameCount=0,this._buf=new e(0),this._bufs=[],this.on("finish",function(){this.push(null)})}function v(){O.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}function m(t){var r=new e(4);return r.writeInt32BE(t),r}function w(t,e){var r=new B(e),n=t._read(r);if(!r.isValid())throw new Error(z("truncated %s",t));return{head:n,tail:r.buf.slice(r.pos)}}function b(t,e){var r=new Error(z("%s: %s",t,e.message));return r.cause=e,r}function k(t){return!!t&&"[object Error]"===Object.prototype.toString.call(t)}function E(t,r){return e.concat([r||new e([0]),new e([1,0]),D.toBuffer(t.message)])}function x(t){return t?L.getHash(t).readInt16BE(0)<<32-C:0}function T(t,e){return(t^e)>>32-C===0}function S(t){return!(!t||!t.pipe)}var A=r(9),L=r(10),R=r(16),O=r(15),N=r(12),B=L.Tap,I=N.debuglog("avro"),z=N.format,M={},F=A.createType("boolean",M),j=A.createType({type:"map",values:"bytes"},M),D=A.createType("string",M),P=A.createType({name:"org.apache.avro.ipc.HandshakeRequest",type:"record",fields:[{name:"clientHash",type:{name:"MD5",type:"fixed",size:16}},{name:"clientProtocol",type:["null","string"],default:null},{name:"serverHash",type:"MD5"},{name:"meta",type:["null",j],default:null}]},M),U=A.createType({name:"org.apache.avro.ipc.HandshakeResponse",type:"record",fields:[{name:"match",type:{name:"HandshakeMatch",type:"enum",symbols:["BOTH","CLIENT","NONE"]}},{name:"serverProtocol",type:["null","string"],default:null},{name:"serverHash",type:["null","MD5"],default:null},{name:"meta",type:["null",j],default:null}]},M),C=16;o.prototype.subprotocol=function(){return new o(this._name,this._messages,this._types,Object.create(this._handlers))},o.prototype.createEmitter=function(t,e){var r=e&&e.objectMode;if("function"==typeof t){var n;return n=r?t:function(r){var n=new g(e);return n.pipe(t(function(t,e){return t?void r(t):void r(null,e.pipe(new _))})),n},new a(this,n,e)}var i,o;if(S(t)?i=o=t:(i=t.readable,o=t.writable),!r){var s=new y;i=i.pipe(s);var h=new v;h.pipe(o),o=h}var c=new u(this,i,o,e);return r||c.once("eot",function(){i.unpipe(s),h.unpipe(o)}),c},o.prototype.createListener=function(t,e){var r=e&&e.objectMode;if("function"==typeof t){var n;return n=r?t:function(r){return t(function(t,n){if(t)return void r(t);var i=new g(e);i.pipe(n),r(null,i)}).pipe(new _)},new c(this,n,e)}var i,o;if(S(t)?i=o=t:(i=t.readable,o=t.writable),!r){var s=new y;i=i.pipe(s);var a=new v;a.pipe(o),o=a}var u=new f(this,i,o,e);return r||u.once("eot",function(){i.unpipe(s),a.unpipe(o)}),u},o.prototype.emit=function(t,e,r,n){function i(t,e){n?n.call(s,t,e):t&&r.emit("error",t)}if(!r||!this.equals(r.getProtocol()))throw new Error("invalid emitter");var o=this._messages[t];if(!o)throw new Error("unknown message: "+t);var s=this;return r.emitMessage(t,{request:e},function(t,e){var r=o.getErrorType();return t?(this._strict&&(t=r.clone(t.message,{wrapUnions:!0})),void i(t)):(t=e.error,this._strict||(void 0===t?t=null:A.Type.isType(r,"union:unwrapped")?"string"==typeof t&&(t=new Error(t)):t&&t.string&&(t=new Error(t.string))),void i(t,e.response))}),r.getPending()},o.prototype.on=function(t,e){if(!this._messages[t])throw new Error(z("unknown message: %s",t));return this._handlers[t]=e,this},o.prototype.getHandler=function(t){return this._handlers[t]},o.prototype.getName=function(){return this._name},o.prototype.getType=function(t){return this._types[t]},o.prototype.getMessage=function(t){return this._messages[t]},o.prototype.getMessages=function(){var t=this._messages;return Object.keys(t).map(function(e){return t[e]})},o.prototype.getSchema=function(t){var e=[];return Object.keys(this._types).forEach(function(t){var r=this._types[t];r.getName()&&e.push(r)},this),A.stringify({protocol:this._name,types:e.length?e:void 0,messages:Object.keys(this._messages).length?this._messages:void 0},t)},o.prototype.getFingerprint=function(t){return t?L.getHash(this.getSchema()):new e(this._hs,"binary")},o.prototype.equals=function(t){return!!t&&this._hs===t._hs},o.prototype.toString=function(){return this.getSchema({noDeref:!0})},o.prototype.inspect=function(){return z("<Protocol %j>",this._name)},o.MessageEmitter=s,o.MessageListener=h,N.inherits(s,R.EventEmitter),s.prototype.getCache=function(){return this._cache},s.prototype.getProtocol=function(){return this._ptcl},s.prototype.getTimeout=function(){return this._timeout},s.prototype.isDestroyed=function(){return this._destroyed},s.prototype.getPending=function(){return this._registry.size()},s.prototype.emitMessage=function(t,r,i,o){if(void 0===o&&"function"==typeof i&&(o=i,i=void 0),!o)throw new Error("missing callback");var s,a,u;if(this._destroyed)s=new Error("destroyed");else if(""===t)u=new e([0,0]);else if(a=this._ptcl.getMessage(t))try{u=e.concat([j.toBuffer(r.header||{}),D.toBuffer(t),a.getRequestType().toBuffer(r.request)])}catch(t){s=b("invalid request",t)}else s=new Error(z("unknown message: %s",t));var h=this;if(s)return n.nextTick(function(){o.call(h,s)}),!0;var c=i&&void 0!==i.timeout?i.timeout:this._timeout,f=this._registry.add(c,function(e,r,n){var i;if(!e)if(""===t)i={};else try{i=n.decodeResponse(r,t).envelope}catch(t){e=b("invalid response",t)}var s;n&&(s={serverFingerprint:n._fingerprint,serverProtocol:n.getServerProtocol()}),o.call(this,e,i,s),!this._destroyed||this._interrupted||this._registry.size()||this.destroy()});return f|=this._prefix,I("sending message %s",f),this._send(f,u,!!a&&a.isOneWay())},s.prototype.destroy=function(t){this._destroyed=!0;var e=this._registry,r=e.size();t&&r&&(this._interrupted=!0,e.clear()),!t&&r||this.emit("_eot",r)},s.prototype._send=L.abstractFunction,s.prototype._createHandshakeRequest=function(t,e){var r=this._ptcl;return{clientHash:r.getFingerprint(),clientProtocol:e?null:r.getSchema({exportAttrs:!0}),serverHash:t._fingerprint}},s.prototype._getAdapter=function(t){var e=t.serverHash,r=this._cache[e];if(r)return r;var n=i(JSON.parse(t.serverProtocol),{wrapUnions:!0});return r=new d(this._ptcl,n,e),this._cache[e]=r},s.prototype._matchesPrefix=function(t){return T(t,this._prefix)},N.inherits(a,s),a.prototype._send=function(t,r){function i(u){if(!a._interrupted){var h=a._createHandshakeRequest(s,!u),c=a._writableFactory.call(a,function(t,r){return t?void o(t):void r.on("data",function(t){I("received response %s",t.id);var r=e.concat(t.payload);try{var u=w(U,r),c=u.head;c.serverHash&&(s=a._getAdapter(c))}catch(t){return void o(t)}return a.emit("handshake",h,c),"NONE"===c.match?void n.nextTick(function(){i(!0)}):(a._adapter=s,void o(null,u.tail,s))})});c.write({id:t,payload:[P.toBuffer(h),r]}),a._endWritable&&c.end()}}var o=this._registry.get(t),s=this._adapter,a=this;return n.nextTick(i),!0},N.inherits(u,s),u.prototype._send=function(t,r,i){if(!this._connected)return I("queuing request %s",t),this.once("_connected",function(){this._send(t,r,i)}),!1;if(i){var o=this;n.nextTick(function(){o._registry.get(t)(null,new e([0,0,0]),o._adapter)})}return this._writable.write({id:t,payload:[r]})},N.inherits(h,R.EventEmitter),h.prototype.getCache=function(){return this._cache},h.prototype.getPending=function(){return this._pending},h.prototype.getProtocol=function(){return this._ptcl},h.prototype.isDestroyed=function(){return this._destroyed},h.prototype.onMessage=function(t){return this._hook=t,this},h.prototype.destroy=function(t){this._destroyed=!0,!t&&this._pending||(this._interrupted=!0,this.emit("_eot",this._pending))},h.prototype._receive=function(t,r,n){function i(t,r){if(p)return void s.emit("error",new Error("message callback called multiple times"));p=!0,s._pending--;var i;if(!t){var o=c.getErrorType(),a=r.error;s._strict||(k(a)?a=o.clone(a.message,{wrapUnions:!0}):null===a&&(a=void 0));var u=void 0===a;try{var h=j.toBuffer(r.header||{});i=e.concat([h,F.toBuffer(!u),u?c.getResponseType().toBuffer(r.response):o.toBuffer(a)])}catch(e){t=b("invalid response",e)}}t&&(i=E(t,h)),s._interrupted||n(i,c.isOneWay()),s._destroyed&&!s._pending&&s.destroy()}var o=this._ptcl,s=this;try{var a=r.decodeRequest(t)}catch(t){return void n(E(t))}var u=a.message;if(!u)return void n(new e(0));var h=u.getName(),c=o.getMessage(h),f=o._handlers[h],l=a.envelope,p=!1;if(this._pending++,this._hook){var d={clientFingerprint:r._fingerprint,clientProtocol:r.getClientProtocol()};this._hook.call(this,h,l,d,i)}else if(f)if(c.isOneWay())f.call(o,l.request),i(null,{error:void 0,response:null});else try{f.call(o,l.request,this,function(t,e){i(null,{error:t,response:e})})}catch(t){i(t)}else i(new Error(z("unhandled message: %s",h)))},h.prototype._createHandshakeResponse=function(t,e){var r=this._ptcl,n=r.getFingerprint(),i=e&&e.serverHash.equals(n);return{match:t?"NONE":i?"BOTH":"CLIENT",serverProtocol:i?null:r.getSchema({exportAttrs:!0}),serverHash:i?null:n}},h.prototype._getAdapter=function(t){var e=t.clientHash,r=this._cache[e];if(r)return r;if(!t.clientProtocol)throw new Error("unknown protocol");var n=i(JSON.parse(t.clientProtocol),{wrapUnions:!0});return r=new d(n,this._ptcl,e),this._cache[e]=r},h.prototype._matchesPrefix=function(t){return T(t,this._prefix)},N.inherits(c,h),N.inherits(f,h),l.prototype.getName=function(){return this._name},l.prototype.getRequestType=function(){return this._requestType},l.prototype.getResponseType=function(){return this._responseType},l.prototype.getErrorType=function(){return this._errorType},l.prototype.isOneWay=function(){return this._oneWay},l.prototype.inspect=l.prototype.toJSON=function(){var t={request:this._requestType.getFields(),response:this._responseType},e=this._errorType.getTypes();return e.length>1&&(t.errors=A.createType(e.slice(1))),this._oneWay&&(t["one-way"]=!0),t},p.prototype.size=function(){return this._n},p.prototype.get=function(t){return this._cbs[t&this._mask]},p.prototype.add=function(t,e){function r(){i._cbs[o]&&(delete i._cbs[o],i._n--,n&&clearTimeout(n),e.apply(i._ctx,arguments))}this._id=this._id+1&this._mask;var n,i=this,o=this._id;return t>0&&(n=setTimeout(function(){r(new Error("timeout"))},t)),this._cbs[o]=r,this._n++,o},p.prototype.clear=function(){Object.keys(this._cbs).forEach(function(t){this._cbs[t](new Error("interrupted"))},this)},d.prototype.getClientProtocol=function(){return this._clientPtcl},d.prototype.getServerProtocol=function(){return this._serverPtcl},d.prototype._createResolvers=function(){var t={};return this._clientPtcl.getMessages().forEach(function(e){var r=e.getName(),n=this._serverPtcl.getMessage(r);if(!n)throw new Error(z("missing server message: %s",r));if(n.isOneWay()!==e.isOneWay())throw new Error(z("inconsistent one-way parameter for message: %s",r));try{t[r+"?"]=n.getRequestType().createResolver(e.getRequestType()),t[r+"*"]=e.getErrorType().createResolver(n.getErrorType()),t[r+"!"]=e.getResponseType().createResolver(n.getResponseType())}catch(t){throw b("incompatible message "+r,t)}},this),t},d.prototype._getReader=function(t,e){if(this._rsvs)return this._rsvs[t+e];var r=this._serverPtcl.getMessage(t);switch(e){case"?":return r.getRequestType();case"*":return r.getErrorType();case"!":return r.getResponseType()}},d.prototype.decodeRequest=function(t){var e=new B(t),r=j._read(e),n=D._read(e);if(n)var i=this._getReader(n,"?")._read(e);if(!e.isValid())throw new Error("truncated request");return{message:this._clientPtcl.getMessage(n),envelope:{header:r,request:i}}},d.prototype.decodeResponse=function(t,e){var r,n,i=new B(t),o=j._read(i),s=F._read(i),a=this._getReader(e,s?"*":"!");if(s?r=a._read(i):n=a._read(i),!i.isValid())throw new Error("truncated response");return{message:this._serverPtcl.getMessage(e),envelope:{header:o,error:r,response:n}}},N.inherits(_,O.Transform),_.prototype._transform=function(t,r,n){t=e.concat([this._buf,t]);for(var i;t.length>=4&&t.length>=(i=t.readInt32BE(0))+4;){if(i)this._bufs.push(t.slice(4,i+4));else{var o=this._bufs;this._bufs=[],this.push({id:null,payload:o})}t=t.slice(i+4)}this._buf=t,n()},_.prototype._flush=function(){(this._buf.length||this._bufs.length)&&this.emit("error",new Error("trailing data"))},N.inherits(g,O.Transform),g.prototype._transform=function(t,e,r){var n,i,o,s=t.payload;for(n=0,i=s.length;n<i;n++)o=s[n],this.push(m(o.length)),this.push(o);this.push(m(0)),r()},N.inherits(y,O.Transform),y.prototype._transform=function(t,r,n){for(t=e.concat([this._buf,t]);;){if(void 0===this._id){if(t.length<8)return this._buf=t,void n();this._id=t.readInt32BE(0),this._frameCount=t.readInt32BE(4),t=t.slice(8)}for(var i;this._frameCount&&t.length>=4&&t.length>=(i=t.readInt32BE(0))+4;)this._frameCount--,this._bufs.push(t.slice(4,i+4)),t=t.slice(i+4);if(this._frameCount)return this._buf=t,void n();var o={id:this._id,payload:this._bufs};this._bufs=[],this._id=void 0,this.push(o)}},y.prototype._flush=function(){(this._buf.length||this._bufs.length)&&this.emit("error",new Error("trailing data"))},N.inherits(v,O.Transform),v.prototype._transform=function(t,r,n){var i,o=t.payload,s=o.length;i=new e(8),i.writeInt32BE(t.id,0),i.writeInt32BE(s,4),this.push(i);var a;for(a=0;a<s;a++)i=o[a],this.push(m(i.length)),this.push(i);n()},t.exports={HANDSHAKE_REQUEST_TYPE:P,HANDSHAKE_RESPONSE_TYPE:U,Message:l,Protocol:o,Registry:p,createProtocol:i,streams:{FrameDecoder:_,FrameEncoder:g,NettyDecoder:y,NettyEncoder:v}}}).call(e,r(1).Buffer,r(6))},function(t,e,r){"use strict";function n(t,e,r){function o(){var i=u.shift();if(i){var o=l.join(l.dirname(t),i.name);"idl"===i.kind?n(o,e,s):e.importHook(o,i.kind,function(t,e){if(t)return void r(t);switch(i.kind){case"protocol":case"schema":try{var n=JSON.parse(e)}catch(t){return t.path=o,void r(t)}var a="schema"===i.kind?{types:[n]}:n;s(null,a);break;default:r(new Error(d("invalid import kind: %s",i.kind)))}})}else h.length&&(a.types=a.types?h.concat(a.types):h),r(null,JSON.parse(JSON.stringify(a)))}function s(t,e){if(t)return void r(t);(e.types||[]).forEach(function(t){if(void 0===t.namespace){var r=e.namespace;if(!r){var n=/^(.*)\.[^.]+$/.exec(e.protocol);n&&(r=n[1])}t.namespace=r||""}h.push(t)});try{Object.keys(e.messages||{}).forEach(function(t){if(a.messages||(a.messages={}),a.messages[t])throw new Error(d("duplicate message: %s",t));a.messages[t]=e.messages[t]})}catch(t){return void r(t)}o()}r||"function"!=typeof e||(r=e,e=void 0),e=e||{},e.importHook||(e.importHook=c.createImportHook());var a,u,h=[];e.importHook(t,"idl",function(n,s){if(n)return void r(n);if(!s)return void r(null,{});try{var h=i(s,e)}catch(e){return e.path=t,void r(e)}a=h.attrs,u=h.imports,o()})}function i(t,e){var r=new s(t,e);return{attrs:r._readProtocol(),imports:r._imports}}function o(t){this._str=t,this._pos=0,this._queue=new a(3),this._token=void 0,this._doc=void 0}function s(t,e){this._oneWayVoid=!(!e||!e.oneWayVoid),this._reassignJavadoc=!(!e||!e.reassignJavadoc),this._imports=[],this._tk=new o(t),this._tk.next()}function a(t){this._length=0|t,this._data=[]}function u(t){t=t.replace(/^[ \t]+|[ \t]+$/g,"");for(var e=t.split("\n").map(function(t,e){return e?t.replace(/^\s*\*\s?/,""):t});!e[0];)e.shift();for(;!e[e.length-1];)e.pop();this._str=e.join("\n")}function h(t,e){return t.doc instanceof u?(e.doc=t.doc,delete t.doc,1===Object.keys(t).length?t.type:t):t}var c=r(7),f=r(10),l=r(48),p=r(12),d=p.format;o.prototype.get=function(t){if(t&&t.id&&t.id!==this._token.id)throw this.error(d("expected %s but got %s",t.id,this._token.val));if(t&&t.val&&t.val!==this._token.val)throw this.error(d("expected %s but got %s",t.val,this._token.val));return this._token},o.prototype.next=function(t){this._skip(),this._queue.push(this._pos);var e,r=this._pos,n=this._str,i=n.charAt(r);if(!i){if(t&&"(eof)"===t.id)return{id:"(eof)"};throw this.error("unexpected end of input")}if(t&&"json"===t.id?(e="json",this._pos=this._endOfJson()):'"'===i?(e="string",this._pos=this._endOfString()):/[0-9]/.test(i)?(e="number",this._pos=this._endOf(/[0-9]/)):/[`A-Za-z_.]/.test(i)?(e="name",this._pos=this._endOf(/[`A-Za-z0-9_.]/)):(e="operator",this._pos=r+1),this._token={id:e,val:n.slice(r,this._pos)},"json"===e)try{this._token.val=JSON.parse(this._token.val)}catch(t){throw this.error("invalid JSON")}else"name"===e&&(this._token.val=this._token.val.replace(/`/g,""));return this.get(t)},o.prototype.prev=function(t){var e=this._queue.pop();if(void 0===e)throw new Error("cannot backtrack more");return this._pos=e,this.get(t)},o.prototype.error=function(t){var e,r=this._queue.peek()||1,n=this._str,i=1,o=0;for(e=0;e<r;e++)"\n"===n.charAt(e)&&(i++,o=e);var s=new Error(t);return s.lineNum=i,s.colNum=r-o,s},o.prototype.addJavadoc=function(t){void 0!==this._doc&&void 0===t.doc&&(t.doc=this._doc,this._doc=void 0)},o.prototype._skip=function(){for(var t,e,r=this._str;(e=r.charAt(this._pos))&&/\s/.test(e);)this._pos++;if("/"===e)switch(r.charAt(this._pos+1)){case"/":for(this._pos+=2;(e=r.charAt(this._pos))&&"\n"!==e;)this._pos++;return this._skip();case"*":for(this._pos+=2,"*"===r.charAt(this._pos)&&(t=this._pos+1);e=r.charAt(this._pos++);)if("*"===e&&"/"===r.charAt(this._pos))return this._pos++,void 0!==t&&(this._doc=new u(r.slice(t,this._pos-2))),this._skip();throw this.error("unterminated comment")}},o.prototype._endOf=function(t){for(var e=this._pos,r=this._str;t.test(r.charAt(e));)e++;return e},o.prototype._endOfString=function(){for(var t,e=this._pos+1,r=this._str;t=r.charAt(e);){if('"'===t)return e+1;"\\"===t?e+=2:e++}throw this.error("unterminated string")},o.prototype._endOfJson=function(){var t=f.jsonEnd(this._str,this._pos);if(t<0)throw new Error("invalid JSON at "+this._pos);return t},s.prototype._readProtocol=function(){for(var t=this._tk,e={},r=[],n={},i=!1;"import"===t.get().val;)this._readImport();for(;"@"===t.get().val;)this._readAnnotation(e);for(t.addJavadoc(e),t.get({val:"protocol"}),e.protocol=t.next({id:"name"}).val,t.next({val:"{"}),t.next();"}"!==t.get().val;)if("import"===t.get().val)this._readImport();else{var o=this._readType();if(o.name)r.push(o);else{i=!0;var s=!1;"void"!==o&&"void"!==o.type||(this._oneWayVoid&&(s=!0),"void"===o?o="null":o.type="null");var a=this._readMessage(o);if(s&&(a.attrs["one-way"]=!0),n[a.name])throw new Error(d("duplicate message: %s",a.name));n[a.name]=a.attrs}}return t.next({id:"(eof)"}),r.length&&(e.types=r),i&&(e.messages=n),e},s.prototype._readImport=function(){var t=this._tk;t.get({val:"import"});var e=t.next({id:"name"}).val,r=JSON.parse(t.next({id:"string"}).val);this._imports.push({kind:e,name:r}),t.next({val:";"}),t.next()},s.prototype._readAnnotation=function(t){var e=this._tk;e.get({val:"@"});for(var r=[];"("!==e.next().val;)r.push(e.get().val);t[r.join("")]=e.next({id:"json"}).val,e.next({val:")"}),e.next()},s.prototype._readMessage=function(t){var e,r=this._tk;for(this._reassignJavadoc?(e={},e.response=h(t,e)):e={response:t};"@"===r.get().val;)this._readAnnotation(e);var n=r.get({id:"name"}).val;if(e.request=[],r.next({val:"("}),")"!==r.next().val){r.prev();do r.next(),e.request.push(this._readField());while(")"!==r.get().val)}return"throws"===r.next().val?(r.next(),e.errors=[this._readType()]):"oneway"===r.get().val&&(r.next(),e["one-way"]=!0),r.get({val:";"}),r.next(),{name:n,attrs:e}},s.prototype._readField=function(){var t=this._tk,e={type:this._readType()};for(this._reassignJavadoc&&(e.type=h(e.type,e));"@"===t.get().val;)this._readAnnotation(e);return t.addJavadoc(e),e.name=t.get({id:"name"}).val,"="===t.next().val&&(e.default=t.next({id:"json"}).val,t.next()),e},s.prototype._readType=function(){for(var t=this._tk,e={};"@"===t.get().val;)this._readAnnotation(e);switch(t.addJavadoc(e),t.get().val){case"record":case"error":return this._readRecord(e);case"fixed":return this._readFixed(e);case"enum":return this._readEnum(e);case"map":return this._readMap(e);case"array":return this._readArray(e);case"union":return this._readUnion(e);default:var r=t.get().val;return t.next(),Object.keys(e).length?(e.type=r,e):r}},s.prototype._readFixed=function(t){var e=this._tk;return t.type=e.get({val:"fixed"}).val,t.name=e.next({id:"name"}).val,e.next({val:"("}),t.size=parseInt(e.next({id:"number"}).val),e.next({val:")"}),";"===e.next().val&&e.next(),t},s.prototype._readMap=function(t){var e=this._tk;return t.type=e.get({val:"map"}).val,e.next({val:"<"}),e.next(),t.values=this._readType(),e.get({val:">"}),e.next(),t},s.prototype._readArray=function(t){var e=this._tk;return t.type=e.get({val:"array"}).val,e.next({val:"<"}),e.next(),t.items=this._readType(),e.get({val:">"}),e.next(),t},s.prototype._readEnum=function(t){var e=this._tk;t.type=e.get({val:"enum"}).val,t.name=e.next({id:"name"}).val,e.next({val:"{"}),t.symbols=[];do t.symbols.push(e.next().val);while("}"!==e.next().val);return e.next(),t},s.prototype._readUnion=function(t){var e=this._tk,r=[];e.get({val:"union"}),e.next({val:"{"});do e.next(),r.push(this._readType());while("}"!==e.get().val);return e.next(),Object.keys(t).forEach(function(e){r[e]=t[e]}),r},s.prototype._readRecord=function(t){var e=this._tk;for(t.type=e.get({id:"name"}).val,t.name=e.next({id:"name"}).val,t.fields=[],e.next({val:"{"});"}"!==e.next().val;)t.fields.push(this._readField()),e.get({val:";"});return e.next(),t},a.prototype.push=function(t){this._data.push(t),this._data.length>this._length&&this._data.shift()},a.prototype.peek=function(){return this._data[this._data.length-1]},a.prototype.pop=function(){return this._data.pop()},u.prototype.toJSON=function(){return this._str},t.exports={BoundedQueue:a,Tokenizer:o,assemble:n,parse:i}},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,i="/"===s.charAt(0))}return e=r(n(e.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),o="/"===s(t,-1);return t=r(n(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),o=n(r.split("/")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}for(var h=[],u=a;u<i.length;u++)h.push("..");return h=h.concat(o.slice(a)),h.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},e.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(e,r(6))},function(t,e,r){(function(e){"use strict";function n(t,r){if(r=r||{},r.valueHook){var o=r.valueHook(t,r);if(void 0!==o){if(!h.Type.isType(o))throw new Error(f("invalid value hook return value: %j",o));return o}}switch(typeof t){case"string":return l("string",r);case"boolean":return l("boolean",r);case"number":return(0|t)===t?l("int",r):Math.abs(t)<9007199254740991?l("float",r):l("double",r);case"object":if(null===t)return l("null",r);if(Array.isArray(t))return t.length?l({type:"array",items:i(t.map(function(t){return n(t,r)}))},r):d;if(e.isBuffer(t))return l("bytes",r);var s=Object.keys(t);return s.some(function(t){return!h.isValidName(t)})?l({type:"map",values:i(s.map(function(e){return n(t[e],r)}),r)},r):l({type:"record",fields:s.map(function(e){return{name:e,type:n(t[e],r)}})},r);default:throw new Error(f("cannot infer type from: %j",t))}}function i(t,e){if(!t.length)throw new Error("no types to combine");if(1===t.length)return t[0];e=e||{};var r=[],n=0,h=!0;if(t.forEach(function(t){switch(t.getTypeName()){case"union:unwrapped":
h=!1,r=r.concat(t.getTypes());break;case"union:wrapped":n++,r=r.concat(t.getTypes());break;case"null":r.push(t);break;default:h=!1,r.push(t)}}),n){if(!h)throw new Error("cannot combine wrapped union");var c={};r.forEach(function(t){var e=t.getName(!0),r=c[e];if(r){if(!t.equals(r))throw new Error("inconsistent branch type")}else c[e]=t});var f,_=e.wrapUnions;e.wrapUnions=!0;try{f=l(Object.keys(c).map(function(t){return c[t]}),e)}catch(t){throw e.wrapUnions=_,t}return e.wrapUnions=_,f}var g={};r.forEach(function(t){var e=p(t),r=g[e];r||(g[e]=r=[]),r.push(t)});var y=Object.keys(g),v=y.map(function(t){var r=g[t];if(1===r.length)return r[0];switch(t){case"null":case"boolean":return r[0];case"number":return o(r);case"string":return s(r,e);case"buffer":return a(r,e);case"array":return r=r.filter(function(t){return t!==d}),r.length?l({type:"array",items:i(r.map(function(t){return t.getItemsType()}))},e):d;default:return u(r,e)}});return 1===v.length?v[0]:l(v,e)}function o(t){var e,r,n,i,o=["int","long","float","double"],s=-1,a=null;for(e=0,r=t.length;e<r;e++)n=t[e],i=o.indexOf(n.getTypeName()),i>s&&(s=i,a=n);return a}function s(t,e){var r,n,i,o,s={};for(r=0,n=t.length;r<n;r++){if(i=t[r],"string"===i.getTypeName())return i;o=i.getSymbols();var a,u;for(a=0,u=o.length;a<u;a++)s[o[a]]=!0}return l({type:"enum",symbols:Object.keys(s)},e)}function a(t,e){var r,n,i,o=-1;for(r=0,n=t.length;r<n;r++){if(i=t[r],"bytes"===i.getTypeName())return i;o===-1?o=i.getSize():i.getSize()!==o&&(o=-2)}return o<0?l("bytes",e):t[0]}function u(t,e){var r,n,o,s,a=[],u={},h={},c=!0;for(r=0,n=t.length;r<n;r++)if(o=t[r],"map"===o.getTypeName())c=!1,a.push(o.getValuesType());else{s=o.getFields();var f,p,d,_,g,y;for(f=0,p=s.length;f<p;f++)d=s[f],g=d.getName(),y=d.getType(),a.push(y),c&&(u[g]||(u[g]=[]),u[g].push(y),_=d.getDefault(),void 0!==_&&(h[g]=_))}if(c){var v=Object.keys(u);for(r=0,n=v.length;r<n;r++)g=v[r],u[g].length<t.length&&void 0===h[g]&&(e&&e.strictDefaults?c=!1:(u[g].unshift(l("null",e)),h[g]=null))}var m;return m=c?{type:"record",fields:v.map(function(t){var r=i(u[t],e),n=h[t];if(void 0!==n&&~r.getTypeName().indexOf("union")){var o,s,a=r.getTypes();for(o=0,s=a.length;o<s&&!a[o].isValid(n);o++);if(o>0){var c=a[0];a[0]=a[o],a[o]=c,r=l(a,e)}}return{name:t,type:r,default:h[t]}})}:{type:"map",values:i(a,e)},l(m,e)}var h=r(9),c=r(10),f=c.format,l=h.createType,p=h.getTypeBucket,d=l({type:"array",items:"null"});t.exports={combine:i,infer:n}}).call(e,r(1).Buffer)}])});